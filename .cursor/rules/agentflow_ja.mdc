# AgentFlow å·¥ç¨‹è¦ç¯„ (Engineering Rules)

> **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
> **æ›´æ–°æ—¥**: 2025-01-15
> **é©ç”¨ç¯„å›²**: AgentFlow Framework ã®å…¨ã‚³ãƒ¼ãƒ‰

---

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

AgentFlow ã¯è»½é‡ AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€MCP / A2A / AG-UI / A2UI ã®4ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æä¾›ã—ã¾ã™ã€‚

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| é …ç›® | æŠ€è¡“ |
|------|------|
| è¨€èª | Python 3.13+ |
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† | pip / conda |
| Linter | Ruff |
| å‹ãƒã‚§ãƒƒã‚¯ | Mypy (strict) |
| ãƒ†ã‚¹ãƒˆ | Pytest (asyncio) |
| ãƒ“ãƒ«ãƒ‰ | Hatch |

### 8å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
ğŸ“± ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (apps/) â†’ ãƒ“ã‚¸ãƒã‚¹ã‚¢ãƒ—ãƒª
ğŸ¨ UIå±¤ (studio/) â†’ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿
ğŸ”„ ãƒ•ãƒ­ãƒ¼å±¤ (quick.py, patterns/) â†’ 3ã¤ã®é–‹ç™ºæ–¹å¼
ğŸ¤– Agentå±¤ (core/agent_block.py) â†’ AgentåŸºåº•ã‚¯ãƒ©ã‚¹
ğŸ› ï¸ ãƒ„ãƒ¼ãƒ«å±¤ (skills/, providers/tool_provider.py) â†’ Skillsã‚·ã‚¹ãƒ†ãƒ 
ğŸ”Œ Providerå±¤ (providers/) â†’ çµ±ä¸€ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
ğŸŒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«å±¤ (protocols/) â†’ 4ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚µãƒãƒ¼ãƒˆ
ğŸ’¾ ã‚¤ãƒ³ãƒ•ãƒ©å±¤ (memory/, llm/) â†’ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ è¦ç¯„

```
agentflow/
â”œâ”€â”€ __init__.py          # å…¬é–‹API ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ core/                # ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ agent_block.py   # AgentåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ engine.py        # å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ exceptions.py    # ä¾‹å¤–éšå±¤
â”‚   â”œâ”€â”€ types.py         # ã‚³ã‚¢å‹å®šç¾©
â”‚   â”œâ”€â”€ metadata.py      # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å®šç¾©
â”‚   â””â”€â”€ schemas.py       # Schemaãƒ­ãƒ¼ãƒ€ãƒ¼
â”œâ”€â”€ providers/           # çµ±ä¸€Provider
â”‚   â”œâ”€â”€ llm_provider.py  # LLMã‚¢ã‚¯ã‚»ã‚¹
â”‚   â”œâ”€â”€ tool_provider.py # ãƒ„ãƒ¼ãƒ«ç™»éŒ²
â”‚   â”œâ”€â”€ data_provider.py # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
â”‚   â””â”€â”€ event_provider.py # ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
â”œâ”€â”€ protocols/           # ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
â”‚   â”œâ”€â”€ mcp_client.py    # MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«
â”‚   â”œâ”€â”€ a2a_*.py         # A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«
â”‚   â”œâ”€â”€ agui_*.py        # AG-UIãƒ—ãƒ­ãƒˆã‚³ãƒ«
â”‚   â””â”€â”€ a2ui/            # A2UIãƒ—ãƒ­ãƒˆã‚³ãƒ«
â”œâ”€â”€ patterns/            # å”èª¿ãƒ‘ã‚¿ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ multi_agent.py   # ãƒãƒ«ãƒAgentå”èª¿
â”‚   â””â”€â”€ supervisor.py    # Supervisorãƒ‘ã‚¿ãƒ¼ãƒ³
â”œâ”€â”€ skills/              # Skillsã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ base.py          # SkillåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ engine.py        # Skillã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ loader.py        # Skillãƒ­ãƒ¼ãƒ€ãƒ¼
â”‚   â””â”€â”€ builtin/         # å†…è”µSkills
â”œâ”€â”€ memory/              # è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ memory_manager.py # è¨˜æ†¶ç®¡ç†
â”‚   â”œâ”€â”€ vector_search.py  # ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢
â”‚   â””â”€â”€ vector_db/       # ãƒ™ã‚¯ãƒˆãƒ«DB
â”œâ”€â”€ llm/                 # LLMçµ±åˆ
â””â”€â”€ cli/                 # CLIãƒ„ãƒ¼ãƒ«

apps/                    # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹
â”œâ”€â”€ decision_governance_engine/  # æ„æ€æ±ºå®šã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ market_trend_monitor/        # å¸‚å ´ç›£è¦–
â””â”€â”€ code_migration_assistant/    # ã‚³ãƒ¼ãƒ‰ç§»è¡Œ

tests/                   # ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ unit/                # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ integration/         # çµ±åˆãƒ†ã‚¹ãƒˆ
â””â”€â”€ conftest.py          # å…±æœ‰Fixtures
```

---

## ğŸ”§ ã‚³ã‚¢æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### 1. Agentå®šç¾©ï¼ˆ3ã¤ã®æ–¹å¼ï¼‰

```python
# æ–¹å¼1: @agent ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ï¼ˆæœ€ã‚‚ç°¡å˜ãƒ»æ¨å¥¨ï¼‰
from agentflow import agent, tool, AgentClient

@agent
class QAAgent:
    """è³ªå•å¿œç­”Agent"""
    system_prompt = "ã‚ãªãŸã¯è¦ªåˆ‡ãªã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™"
    skills = ["chatbot", "rag"]  # Claude Code Skillsäº’æ›
    
    @tool
    def search(self, query: str) -> list[dict]:
        """æ¤œç´¢æ©Ÿèƒ½"""
        return []

# å‘¼ã³å‡ºã—
result = await AgentClient.get("QAAgent").invoke({"question": "..."})

# æ–¹å¼2: create_flowï¼ˆè¤‡æ•°Agentå”èª¿ï¼‰
from agentflow import create_flow

flow = create_flow(
    agents=[GatekeeperAgent(), AnalysisAgent()],
    pattern="sequential",  # sequential | concurrent | handoff
    enable_memory=True
)
result = await flow.run({"task": "..."})

# æ–¹å¼3: AgentBlockï¼ˆå®Œå…¨åˆ¶å¾¡ï¼‰
from agentflow.core.agent_block import AgentBlock

class CustomAgent(AgentBlock):
    async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
        # ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¸ãƒƒã‚¯
        return {"result": "ok"}
```

### 2. LLM Providerï¼ˆæ¾çµåˆï¼‰

```python
# æ¨å¥¨: get_llm() é–¢æ•°ã‚’ä½¿ç”¨
from agentflow.providers import get_llm

llm = get_llm()  # ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è‡ªå‹•æ¤œå‡º
response = await llm.chat([{"role": "user", "content": "hello"}])

# Agentå†…ã§ã®ä½¿ç”¨
class MyAgent(AgentBlock):
    async def run(self, input_data):
        llm = get_llm(temperature=0.3)  # åˆ†æå‘ã‘ä½æ¸©åº¦
        return await llm.chat([...])
```

### 3. Skills ã‚·ã‚¹ãƒ†ãƒ ï¼ˆClaude Code Skillsäº’æ›ï¼‰

```python
from agentflow.skills import SkillEngine

engine = SkillEngine(auto_learn=True)
result = await engine.resolve("PDFã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º")

if result.generated:
    print(f"ğŸ†• æ–°Skillè‡ªå‹•ç”Ÿæˆ: {result.skill.name}")
```

### 4. ãƒãƒ«ãƒAgentå”èª¿ãƒ‘ã‚¿ãƒ¼ãƒ³

```python
from agentflow.patterns.multi_agent import AgentCoordinator, SharedContext

# Sequentialå”èª¿
coordinator = AgentCoordinator(
    agents=[Agent1(), Agent2()],
    pattern="sequential",
    shared_context=SharedContext(enable_memory=True)
)

# Supervisorãƒ‘ã‚¿ãƒ¼ãƒ³
from agentflow.patterns.supervisor import SupervisorCoordinator

supervisor = SupervisorCoordinator(
    supervisor=SupervisorAgent(),
    workers={
        "research": ResearchAgent(),
        "write": WriteAgent(),
    },
    max_iterations=10
)
```

---

## ğŸ“ ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«è¦ç¯„

### 1. å‘½åè¦å‰‡

```python
# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å: snake_case
# agent_flow.py âœ…  |  AgentFlow.py âŒ

# ã‚¯ãƒ©ã‚¹å: PascalCase
class AgentFlowEngine: ...  # âœ…
class agent_flow_engine: ...  # âŒ

# é–¢æ•°/å¤‰æ•°: snake_case
def create_agent() -> Agent: ...  # âœ…
def createAgent() -> Agent: ...  # âŒ

# å®šæ•°: UPPER_SNAKE_CASE
MAX_RETRIES = 3  # âœ…

# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ãƒ³ãƒãƒ¼: å˜ä¸€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
class Agent:
    def __init__(self) -> None:
        self._internal_state: dict[str, Any] = {}  # âœ…
```

### 2. å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ100%ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼‰

```python
# âœ… å®Œå…¨ãªå‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
from typing import Any
from collections.abc import Callable, Awaitable

async def execute_workflow(
    workflow_id: str,
    inputs: dict[str, Any],
    hooks: list[Callable[[str], Awaitable[None]]] | None = None,
) -> dict[str, Any]:
    ...

# âŒ å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³
async def execute_workflow(workflow_id, inputs, hooks=None):
    ...
```

### 3. Docstringï¼ˆGoogleã‚¹ã‚¿ã‚¤ãƒ«ï¼‰

```python
async def execute_workflow(
    workflow_id: str,
    inputs: dict[str, Any],
    *,
    timeout: float = 30.0,
) -> dict[str, Any]:
    """æŒ‡å®šã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

    Args:
        workflow_id: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¸€æ„è­˜åˆ¥å­
        inputs: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¾æ›¸
        timeout: å®Ÿè¡Œã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’

    Returns:
        å®Ÿè¡Œçµæœã‚’å«ã‚€è¾æ›¸

    Raises:
        ValueError: workflow_idãŒç©ºã®å ´åˆ
        TimeoutError: å®Ÿè¡ŒãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆ

    Example:
        >>> result = await execute_workflow("my-workflow", {"input": "test"})
        >>> print(result["status"])
        success
    """
    ...
```

### 4. ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºï¼ˆisortï¼‰

```python
# 1. æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
import asyncio
import logging
from pathlib import Path
from typing import Any

# 2. ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£
import httpx
from pydantic import BaseModel

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…
from agentflow.core.engine import AgentFlowEngine
from agentflow.core.types import WorkflowConfig
```

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆåŸå‰‡

### 1. SOLIDåŸå‰‡

```python
# S - å˜ä¸€è²¬ä»»
class Agent:
    async def execute(self) -> None: ...  # å®Ÿè¡Œã®ã¿æ‹…å½“

class AgentRepository:
    async def save(self, agent: Agent) -> None: ...  # æ°¸ç¶šåŒ–ã®ã¿æ‹…å½“

# O - é–‹é–‰åŸå‰‡ï¼ˆProtocolï¼‰
from typing import Protocol

class ProtocolAdapter(Protocol):
    async def execute(self, request: dict[str, Any]) -> dict[str, Any]: ...

# D - ä¾å­˜æ€§é€†è»¢
class AgentManager:
    def __init__(self, storage: Storage) -> None:  # æŠ½è±¡ã«ä¾å­˜
        self._storage = storage
```

### 2. éåŒæœŸå„ªå…ˆ

```python
# âœ… ã™ã¹ã¦ã®I/Oæ“ä½œã§async/awaitã‚’ä½¿ç”¨
async def load_agent(agent_id: str) -> Agent:
    async with aiofiles.open(f"agents/{agent_id}.yaml") as f:
        content = await f.read()
    return Agent.from_yaml(content)

# âŒ ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å‘¼ã³å‡ºã—ã‚’é¿ã‘ã‚‹
def load_agent_sync(agent_id: str) -> Agent:
    with open(f"agents/{agent_id}.yaml") as f:  # ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ï¼
        content = f.read()
    return Agent.from_yaml(content)
```

### 3. ä¾å­˜æ€§æ³¨å…¥

```python
class AgentFlowEngine:
    def __init__(
        self,
        workflow_engine: WorkflowEngine,
        protocol_adapters: dict[str, ProtocolAdapter],
        logger: logging.Logger | None = None,
    ) -> None:
        self._workflow = workflow_engine
        self._adapters = protocol_adapters
        self._logger = logger or logging.getLogger(__name__)
```

### 4. Pydanticãƒ‡ãƒ¼ã‚¿æ¤œè¨¼

```python
from pydantic import BaseModel, Field, field_validator

class AgentMetadata(BaseModel):
    """Agentãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«"""
    
    name: str = Field(..., min_length=1, max_length=100)
    version: str = Field(..., pattern=r"^\d+\.\d+\.\d+$")
    protocols: list[str] = Field(default_factory=list)
    
    @field_validator("protocols")
    @classmethod
    def validate_protocols(cls, v: list[str]) -> list[str]:
        valid = {"mcp", "a2a", "ag-ui", "a2ui"}
        if invalid := set(v) - valid:
            raise ValueError(f"Invalid protocols: {invalid}")
        return v
```

---

## ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¦ç¯„

### 1. ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–éšå±¤

```python
# agentflow/core/exceptions.py
class AgentFlowError(Exception):
    """AgentFlowåŸºåº•ä¾‹å¤–"""

class WorkflowError(AgentFlowError):
    """ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–¢é€£ä¾‹å¤–"""

class WorkflowNotFoundError(WorkflowError):
    """ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„"""
    def __init__(self, workflow_id: str) -> None:
        super().__init__(f"Workflow not found: {workflow_id}")
        self.workflow_id = workflow_id

class ProtocolError(AgentFlowError):
    """ãƒ—ãƒ­ãƒˆã‚³ãƒ«é–¢é€£ä¾‹å¤–"""

class ConfigurationError(AgentFlowError):
    """è¨­å®šç„¡åŠ¹"""
```

### 2. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```python
# âœ… ç‰¹å®šã®ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒ
try:
    result = await execute_workflow(workflow_id)
except WorkflowNotFoundError:
    logger.error(f"Workflow not found: {workflow_id}")
    raise
except TimeoutError:
    logger.warning(f"Workflow timeout: {workflow_id}")
    return {"status": "timeout"}

# âŒ ã™ã¹ã¦ã®ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒ
try:
    result = await execute_workflow(workflow_id)
except Exception:  # åºƒã™ãã‚‹ï¼
    pass

# âœ… raise from ã§ä¾‹å¤–ãƒã‚§ãƒ¼ãƒ³ã‚’ä¿æŒ
try:
    data = await fetch_data()
except httpx.HTTPError as e:
    raise WorkflowError(f"Failed to fetch data") from e
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¦ç¯„

### 1. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸è¦ä»¶

| ã‚¿ã‚¤ãƒ— | è¦ä»¶ |
|--------|------|
| å˜ä½“ãƒ†ã‚¹ãƒˆ | â‰¥ 80% ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ |
| çµ±åˆãƒ†ã‚¹ãƒˆ | ã™ã¹ã¦ã®ã‚³ã‚¢ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ |
| E2Eãƒ†ã‚¹ãƒˆ | ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª |

### 2. ãƒ†ã‚¹ãƒˆæ§‹é€ 

```python
# tests/unit/test_agent_block.py
import pytest
from agentflow.core.agent_block import AgentBlock

class TestAgentBlock:
    """AgentBlockå˜ä½“ãƒ†ã‚¹ãƒˆ"""
    
    @pytest.fixture
    def sample_metadata_file(self, tmp_path: Path) -> Path:
        """ãƒ†ã‚¹ãƒˆç”¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ"""
        ...
    
    @pytest.fixture
    def concrete_agent_class(self) -> type[AgentBlock]:
        """ãƒ†ã‚¹ãƒˆç”¨å…·è±¡Agentã‚¯ãƒ©ã‚¹"""
        class ConcreteAgent(AgentBlock):
            async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
                return {"result": "ok"}
        return ConcreteAgent
    
    @pytest.mark.asyncio
    async def test_run_method(
        self,
        concrete_agent_class: type[AgentBlock],
        sample_metadata_file: Path,
    ) -> None:
        """runãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆ"""
        agent = concrete_agent_class(metadata_path=sample_metadata_file)
        result = await agent.run({"text": "hello"})
        assert result["result"] == "ok"
```

### 3. å¤–éƒ¨ä¾å­˜ã®ãƒ¢ãƒƒã‚¯

```python
from unittest.mock import AsyncMock

async def test_agent_with_mocked_storage() -> None:
    mock_storage = AsyncMock()
    mock_storage.load.return_value = '{"name": "test"}'
    
    agent = Agent(storage=mock_storage)
    await agent.load("test_id")
    
    mock_storage.load.assert_called_once_with("test_id")
```

### 4. ãƒ†ã‚¹ãƒˆãƒãƒ¼ã‚«ãƒ¼

```python
# pyproject.toml ã§å®šç¾©ã•ã‚ŒãŸãƒãƒ¼ã‚«ãƒ¼
@pytest.mark.unit         # å˜ä½“ãƒ†ã‚¹ãƒˆ
@pytest.mark.integration  # çµ±åˆãƒ†ã‚¹ãƒˆ
@pytest.mark.e2e          # ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
@pytest.mark.slow         # é…ã„ãƒ†ã‚¹ãƒˆ

# ç‰¹å®šã®ãƒãƒ¼ã‚«ãƒ¼ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
# pytest -m unit
# pytest -m "not slow"
```

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ç¯„

### 1. ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢

```python
# âŒ ç¦æ­¢
API_KEY = "sk-xxx"
DB_PASSWORD = "secret123"

# âœ… ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨
import os
API_KEY = os.environ.get("OPENAI_API_KEY")

# âœ… pydantic-settings ã‚’ä½¿ç”¨
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    openai_api_key: str
    database_url: str
    
    class Config:
        env_file = ".env"
```

### 2. å…¥åŠ›æ¤œè¨¼

```python
# âœ… Pydantic ã§æ¤œè¨¼
from pydantic import BaseModel, Field

class DecisionRequest(BaseModel):
    question: str = Field(..., min_length=1, max_length=10000)
    constraints: ConstraintSet | None = None
```

### 3. ãƒ­ã‚°ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

```python
# âŒ æ©Ÿå¯†æƒ…å ±ã®ãƒ­ã‚°ç¦æ­¢
logger.info(f"API Key: {api_key}")

# âœ… ãƒã‚¹ã‚¯å‡¦ç†
logger.info(f"API Key: {api_key[:8]}...")
```

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ä¸¦è¡Œå®Ÿè¡Œ

```python
# âœ… ç‹¬ç«‹ã‚¿ã‚¹ã‚¯ã‚’ä¸¦è¡Œå®Ÿè¡Œ
async def process_all(items: list[str]) -> list[dict]:
    tasks = [process_item(item) for item in items]
    return await asyncio.gather(*tasks)

# âœ… ã‚»ãƒãƒ•ã‚©ã§ä¸¦è¡Œæ•°ã‚’åˆ¶é™
semaphore = asyncio.Semaphore(10)

async def limited_request(url: str) -> dict:
    async with semaphore:
        return await fetch(url)
```

### 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

```python
from functools import lru_cache

@lru_cache(maxsize=100)
def get_config(config_id: str) -> Config:
    return load_config(config_id)
```

### 3. ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«

```python
# âœ… httpx ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«ã‚’ä½¿ç”¨
async with httpx.AsyncClient() as client:
    responses = await asyncio.gather(*[
        client.get(url) for url in urls
    ])
```

---

## ğŸ› ï¸ ãƒ„ãƒ¼ãƒ«è¨­å®š

### Ruff (pyproject.toml)

```toml
[tool.ruff]
line-length = 100
target-version = "py313"

[tool.ruff.lint]
select = ["E", "W", "F", "I", "N", "UP", "ANN", "B", "A", "C4", 
          "DTZ", "T10", "EM", "ISC", "ICN", "PIE", "PT", "Q", 
          "RSE", "RET", "SIM", "TID", "TCH", "ARG", "PTH", 
          "ERA", "PL", "TRY", "RUF"]
ignore = ["ANN101", "ANN102", "ANN401", "TRY003", "PLR0913"]
```

### Mypy (pyproject.toml)

```toml
[tool.mypy]
python_version = "3.13"
strict = true
disallow_untyped_defs = true
warn_return_any = true
```

### Pytest (pyproject.toml)

```toml
[tool.pytest.ini_options]
asyncio_mode = "auto"
addopts = [
    "--strict-markers",
    "--cov=agentflow",
    "--cov-fail-under=80",
]
```

---

## âŒ ç¦æ­¢äº‹é …

| ãƒ«ãƒ¼ãƒ« | èª¬æ˜ |
|--------|------|
| âŒ `print()` | `logging` ã‚’ä½¿ç”¨ |
| âŒ `Any` å‹ | ååˆ†ãªç†ç”±ãŒã‚ã‚‹å ´åˆã®ã¿ |
| âŒ `type: ignore` | ååˆ†ãªç†ç”±ãŒã‚ã‚‹å ´åˆã®ã¿ |
| âŒ å¯å¤‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° | `def foo(x=[])` |
| âŒ ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰è¨­å®š | ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ |
| âŒ `--no-verify` | Git hooks ã‚’è¿‚å›ç¦æ­¢ |
| âŒ ãƒ†ã‚¹ãƒˆç„¡åŠ¹åŒ–ã§ã‚³ãƒŸãƒƒãƒˆ | ãƒ†ã‚¹ãƒˆã‚’é€šéã•ã›ã‚‹ |
| âŒ åºƒç¯„ãªä¾‹å¤–ã‚­ãƒ£ãƒƒãƒ | `except Exception` |

---

## âœ… ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```bash
# 1. ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ruff format .

# 2. Lintãƒã‚§ãƒƒã‚¯
ruff check .

# 3. å‹ãƒã‚§ãƒƒã‚¯
mypy .

# 4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest

# 5. ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ãŒãªã„ã‹ç¢ºèª
grep -r "print(" agentflow/ --include="*.py"
grep -r "breakpoint()" agentflow/ --include="*.py"
```

---

## ğŸ“š AIãŒã‚ˆãçŠ¯ã™é–“é•ã„ãƒã‚§ãƒƒã‚¯

### âŒ async/await ã‚’å¿˜ã‚Œã‚‹

```python
# âŒ é–“é•ã„
def load_data():
    return aiofiles.open("data.txt")  # ã‚³ãƒ«ãƒ¼ãƒãƒ³ã‚’è¿”ã™ï¼

# âœ… æ­£ã—ã„
async def load_data() -> str:
    async with aiofiles.open("data.txt") as f:
        return await f.read()
```

### âŒ å¯å¤‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°

```python
# âŒ é–“é•ã„
def add_item(item: str, items: list[str] = []) -> list[str]:
    items.append(item)  # ã™ã¹ã¦ã®å‘¼ã³å‡ºã—ã§åŒã˜ãƒªã‚¹ãƒˆã‚’å…±æœ‰ï¼
    return items

# âœ… æ­£ã—ã„
def add_item(item: str, items: list[str] | None = None) -> list[str]:
    if items is None:
        items = []
    items.append(item)
    return items
```

### âŒ ãƒªã‚½ãƒ¼ã‚¹ã‚’é–‰ã˜å¿˜ã‚Œã‚‹

```python
# âŒ é–“é•ã„
async def process_file(path: str) -> str:
    f = await aiofiles.open(path)
    content = await f.read()
    return content  # ãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‰ã˜ã‚‰ã‚Œã¦ã„ãªã„ï¼

# âœ… æ­£ã—ã„
async def process_file(path: str) -> str:
    async with aiofiles.open(path) as f:
        return await f.read()
```

### âŒ å¾ªç’°ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

```python
# âœ… TYPE_CHECKING ã‚’ä½¿ç”¨
from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from b import B

class A:
    def use_b(self, b: "B") -> None: ...
```

---

## ğŸ”„ é–‹ç™ºãƒ•ãƒ­ãƒ¼

### 1. æ©Ÿèƒ½é–‹ç™º

```
1. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ: git checkout -b feature/xxx
2. ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆRedï¼‰
3. æ©Ÿèƒ½å®Ÿè£…ï¼ˆGreenï¼‰
4. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆRefactorï¼‰
5. ã‚³ãƒŸãƒƒãƒˆ: git commit -m "feat: xxx"
6. PR + ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
7. main ã«ãƒãƒ¼ã‚¸
```

### 2. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç¯„

```
feat: æ–°æ©Ÿèƒ½
fix: ãƒã‚°ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
style: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
test: ãƒ†ã‚¹ãƒˆ
chore: ãƒ“ãƒ«ãƒ‰/ãƒ„ãƒ¼ãƒ«
```

### 3. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

```
ãƒ¡ã‚¸ãƒ£ãƒ¼.ãƒã‚¤ãƒŠãƒ¼.ãƒ‘ãƒƒãƒ
  1.0.0
  â”‚ â”‚ â””â”€â”€ ãƒã‚°ä¿®æ­£
  â”‚ â””â”€â”€â”€â”€ æ–°æ©Ÿèƒ½ï¼ˆå¾Œæ–¹äº’æ›ï¼‰
  â””â”€â”€â”€â”€â”€â”€ ç ´å£Šçš„å¤‰æ›´ï¼ˆéäº’æ›ï¼‰
```

---

## ğŸ§  AI Agent èªçŸ¥ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### AgentFlow ãŒå®Ÿè£…ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | è‹±æ–‡ | å®Ÿè£… | èª¬æ˜ |
|---------|------|------|------|
| **ReAct** | Reasoning + Acting | âœ… LLM + @tool | æ€è€ƒâ†’è¡Œå‹•â†’è¦³å¯Ÿã®å¾ªç’° |
| **è¨ˆç”»å‹** | Plan-and-Execute | âœ… PlannerAgent | ç›®æ¨™â†’è¨ˆç”»â†’å®Ÿè¡Œâ†’æ¤œè¨¼ |
| **è‡ªå·±åçœ** | Reflection | âœ… ReviewAgent + replan() | PASS/REVISE/REJECTåˆ¤å®š |
| **è¦³å¯Ÿæ¤œè¨¼** | Goal Verification | âœ… Plan.is_complete() | ç›®æ¨™é”æˆã®ç¢ºèª |
| **HITL** | Human-in-the-Loop | âœ… interrupt() | äººé–“æ‰¿èªä»‹å…¥ãƒã‚¤ãƒ³ãƒˆ |
| **è¨˜æ†¶** | Memory | âœ… Memory ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | çŸ­æœŸ/é•·æœŸ/æ„å‘³è¨˜æ†¶ |

### ãƒ‘ã‚¿ãƒ¼ãƒ³ä½¿ç”¨ä¾‹

```python
# 1. ReAct ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ€è€ƒâ†’è¡Œå‹•â†’è¦³å¯Ÿï¼‰
@agent
class ReActAgent:
    @tool
    def search(self, query: str) -> list: ...  # Action

    async def process(self, input_data):
        # Reasoning (LLM)
        # Acting (tool call)
        # Observation (result)
        pass

# 2. è¨ˆç”»å‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆPlan-and-Executeï¼‰
from agentflow import PlannerAgent, PlanExecutor

planner = PlannerAgent()
plan = await planner.create_plan(goal="Webã‚¢ãƒ—ãƒªæ§‹ç¯‰")
executor = PlanExecutor(agents={...})
result = await executor.execute(plan)

# 3. è‡ªå·±åçœãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆReflectionï¼‰
from agentflow.engines import PipelineEngine

engine = PipelineEngine(stages=[
    {"name": "analysis", "agent": AnalysisAgent},
    {"name": "review", "agent": ReviewAgent, "review": True},  # PASS/REVISE/REJECT
])

# 4. HITL ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆHuman-in-the-Loopï¼‰
from agentflow import interrupt, ApprovalRequest

async def risky_action():
    response = await interrupt(ApprovalRequest(
        action="delete_user",
        reason="ä¸å¯é€†æ“ä½œã®ãŸã‚æ‰¿èªãŒå¿…è¦"
    ))
    if response.approved:
        return await do_delete()
```

---

## ğŸ”„ æ¥­ç•Œãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ¯”è¼ƒã¨ AgentFlow ã®ä½ç½®ä»˜ã‘

### ä¸»è¦ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å¼·ã¿

| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | å¼·ã¿1 | å¼·ã¿2 |
|--------------|-------|-------|
| **CrewAI** | å½¹å‰²é§†å‹•å”èª¿ | æ¥µç°¡ API |
| **AutoGen** | å¤š Agent å¯¾è©± | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ– |
| **LangChain** | çµ±ä¸€ LLM/Tool/Memory | æˆç†Ÿã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ  |
| **LangGraph** | ã‚°ãƒ©ãƒ•æ§‹é€ ãƒ•ãƒ­ãƒ¼ | æ¡ä»¶åˆ†å²ãƒ»ãƒ«ãƒ¼ãƒ— |
| **MetaGPT** | ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒãƒ¼ãƒ æ¨¡å€£ | ä¸€æ°—é€šè²«é–‹ç™º |
| **Semantic Kernel** | ä¼æ¥­å‘ã‘ SDK | çµ„ã¿è¾¼ã¿é–¢æ•°å‘¼ã³å‡ºã— |

### AgentFlow ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å„ªä½æ€§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AgentFlow çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Core Runtimeï¼ˆã‚³ã‚¢ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼‰                               â”‚
â”‚  â”œâ”€â”€ PipelineEngine: é †æ¬¡å®Ÿè¡Œ + Review å›é€€                  â”‚
â”‚  â”œâ”€â”€ PlanExecutor: å‹•çš„è¨ˆç”»å®Ÿè¡Œ                              â”‚
â”‚  â””â”€â”€ AgentBlock: è»½é‡ Agent åŸºåº•ã‚¯ãƒ©ã‚¹                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Control Logicï¼ˆåˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ï¼‰                                â”‚
â”‚  â”œâ”€â”€ FlowGraph: DAG ãƒ™ãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼                             â”‚
â”‚  â”œâ”€â”€ GateEngine: æ¡ä»¶åˆ†å²ãƒ»æ—©æœŸçµ‚äº†                          â”‚
â”‚  â””â”€â”€ PlannerAgent: LLM é§†å‹•è¨ˆç”»ç”Ÿæˆ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State/Memoryï¼ˆçŠ¶æ…‹ãƒ»è¨˜æ†¶ï¼‰                                   â”‚
â”‚  â”œâ”€â”€ MemoryManager: çŸ­æœŸ/é•·æœŸ/æ„å‘³è¨˜æ†¶                       â”‚
â”‚  â”œâ”€â”€ Checkpointer: çŠ¶æ…‹æ°¸ç¶šåŒ–                                â”‚
â”‚  â””â”€â”€ SharedContext: Agent é–“ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tool/API Integrationï¼ˆãƒ„ãƒ¼ãƒ«çµ±åˆï¼‰                           â”‚
â”‚  â”œâ”€â”€ MCP: å¤–éƒ¨ãƒ„ãƒ¼ãƒ«æ¥ç¶š                                     â”‚
â”‚  â”œâ”€â”€ @tool ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿: é–¢æ•°ã‚’ãƒ„ãƒ¼ãƒ«åŒ–                        â”‚
â”‚  â””â”€â”€ Skills: Claude Code Skills äº’æ›                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Orchestrationï¼ˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰                        â”‚
â”‚  â”œâ”€â”€ Coordinator: Supervisor/Hierarchical                   â”‚
â”‚  â”œâ”€â”€ A2A: Agent é–“å”èª¿ãƒ—ãƒ­ãƒˆã‚³ãƒ«                             â”‚
â”‚  â””â”€â”€ HITL: interrupt/approval ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Observabilityï¼ˆå¯è¦³æ¸¬æ€§ï¼‰                                    â”‚
â”‚  â”œâ”€â”€ AG-UI: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ                     â”‚
â”‚  â”œâ”€â”€ ProgressEmitter: é€²æ—è¿½è·¡                               â”‚
â”‚  â””â”€â”€ Logging/Metrics: æ§‹é€ åŒ–ãƒ­ã‚°ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AgentFlow vs ä»–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ©Ÿèƒ½æ¯”è¼ƒ

| æ©Ÿèƒ½ | AgentFlow | LangChain | CrewAI | AutoGen |
|------|-----------|-----------|--------|---------|
| è»½é‡ã‚³ã‚¢ | âœ… ~500è¡Œ | âŒ å¤§è¦æ¨¡ | âœ… | âš ï¸ |
| å‹å®‰å…¨ | âœ… Pydantic | âš ï¸ | âš ï¸ | âš ï¸ |
| è¨ˆç”»å‹ Agent | âœ… PlannerAgent | âš ï¸ å¤–éƒ¨ | âŒ | âŒ |
| è‡ªå·±åçœ | âœ… ReviewAgent | âš ï¸ å¤–éƒ¨ | âš ï¸ | âŒ |
| HITL | âœ… interrupt() | âŒ | âŒ | âœ… |
| ãƒ—ãƒ­ãƒˆã‚³ãƒ«çµ±ä¸€ | âœ… MCP/A2A/AG-UI | âŒ | âŒ | âŒ |
| Skills ã‚·ã‚¹ãƒ†ãƒ  | âœ… Claude äº’æ› | âŒ | âŒ | âŒ |

---

## ğŸš€ å°†æ¥ã®æ‹¡å¼µãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: å®‰å®šåŒ–ï¼ˆç¾åœ¨ï¼‰
- [x] HITLï¼ˆHuman-in-the-Loopï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³
- [x] PlannerAgentï¼ˆè¨ˆç”»å‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- [x] ReviewAgentï¼ˆè‡ªå·±åçœãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- [ ] Redis/DB Checkpointerï¼ˆæ°¸ç¶šåŒ–ï¼‰

### Phase 2: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½
- [ ] åˆ†æ•£å®Ÿè¡Œï¼ˆRay/Celery çµ±åˆï¼‰
- [ ] ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ
- [ ] RBAC å¼·åŒ–
- [ ] ç›£æŸ»ãƒ­ã‚°

### Phase 3: é«˜åº¦ãªèªçŸ¥æ©Ÿèƒ½
- [ ] è‡ªå‹•è¨ˆç”»ä¿®æ­£ï¼ˆAuto-Replanï¼‰
- [ ] ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ« Agent
- [ ] å¼·åŒ–å­¦ç¿’ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
- [ ] Agent è‡ªå‹•ç”Ÿæˆï¼ˆAutoAgentï¼‰

---

**ã“ã®è¦ç¯„ã‚’å³æ ¼ã«éµå®ˆã—ã€ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ç¢ºä¿ã—ã¦ãã ã•ã„ï¼**
