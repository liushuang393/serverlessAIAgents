"""{{ agent_name }} - メインエントリーポイント.

{{ description }}

開発方式:
    方式1: @agent デコレータ（最も簡単）
    方式2: create_flow（複数Agent協調）
"""

from typing import Any

# ============================================================
# 方式1: @agent デコレータ（v0.2.0 推奨・最も簡単）
# ============================================================

from agentflow import agent, tool, AgentClient


@agent
class {{ flow_name }}Agent:
    """{{ agent_name }} Agent.

    {{ description }}
    """

    # システムプロンプト（LLM使用時）
    system_prompt = "あなたは{{ agent_name }}の処理を担当するAgentです。"

    @tool
    def process(self, input_text: str) -> str:
        """入力テキストを処理.

        Args:
            input_text: 入力テキスト

        Returns:
            処理結果
        """
        # TODO: ここに処理ロジックを実装
        return f"Processed: {input_text}"

    async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
        """メイン処理.

        Args:
            input_data: 入力データ

        Returns:
            処理結果
        """
        input_text = input_data.get("input", "")
        result = self.process(input_text)
        return {"output": result}


# ============================================================
# 方式2: create_flow（複数Agent協調時に使用）
# ============================================================

# from agentflow import create_flow
#
# flow = create_flow(
#     agents=[{{ flow_name }}Agent()],
#     pattern="sequential",  # "parallel", "handoff" なども可
#     enable_memory=True,
#     name="{{ agent_name }}-flow",
# )


# ============================================================
# 実行
# ============================================================

if __name__ == "__main__":
    import asyncio

    async def main() -> None:
        """テスト実行."""
        # 方式1: AgentClient で呼び出し
        client = AgentClient.get("{{ flow_name }}Agent")
        result = await client.invoke({"input": "Hello, {{ agent_name }}!"})
        print(f"Result: {result}")

        # 方式2: create_flow で呼び出し（コメント解除して使用）
        # result = await flow.run({"input": "Hello!"})
        # print(f"Flow Result: {result}")

    asyncio.run(main())
