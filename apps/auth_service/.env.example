# =============================================================================
# auth_service 設定例
# このファイルを .env にコピーして実際の値を設定してください
# =============================================================================

# --- コア設定 ---
AUTH_SERVICE_PORT=8010
AUTH_SERVICE_HOST=0.0.0.0
AUTH_DATABASE_URL=sqlite+aiosqlite:///./auth_service.db
AUTH_DB_AUTO_CREATE=true
AUTH_DB_ECHO=false

# --- JWT 設定（必須: 本番環境では必ず強固なランダム値を設定） ---
# 生成例: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=your-secret-key-here-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_EXPIRE_MINUTES=30
JWT_REFRESH_EXPIRE_DAYS=7
JWT_ISSUER=auth-service
JWT_AUDIENCE=auth-service

# --- 認証プロバイダー選択 ---
# 選択肢: local_db | google | azure_ad | ldap | saml | proxy
AUTH_PROVIDER=local_db

# --- セキュリティ設定 ---
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15
PASSWORD_HASH_ITERATIONS=200000
PASSWORD_RESET_TTL_MINUTES=15
SESSION_TTL_SECONDS=604800

# --- CORS 設定 ---
# 本番環境では具体的なオリジンを指定すること
ALLOWED_ORIGINS=["*"]

# --- 開発モード（true の場合、パスワードリセットトークンをレスポンスに含める） ---
DEV_MODE=false

# =============================================================================
# Google OAuth2 設定（AUTH_PROVIDER=google 時に使用）
# GCP Console (https://console.cloud.google.com) でOAuth 2.0 クライアントを作成
# リダイレクト URI: http://localhost:8010/auth/oauth2/google/callback
# =============================================================================
# GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-client-secret
# GOOGLE_REDIRECT_URI=http://localhost:8010/auth/oauth2/google/callback

# =============================================================================
# Azure AD 設定（AUTH_PROVIDER=azure_ad 時に使用）
# Azure Portal (https://portal.azure.com) でアプリ登録後に設定
# リダイレクト URI: http://localhost:8010/auth/oauth2/azure_ad/callback
# =============================================================================
# AZURE_CLIENT_ID=your-azure-client-id
# AZURE_CLIENT_SECRET=your-azure-client-secret
# AZURE_TENANT_ID=your-tenant-id

# =============================================================================
# LDAP 設定（AUTH_PROVIDER=ldap 時に使用）
# =============================================================================
# LDAP_SERVER=ldap://your-ldap-server:389
# LDAP_BASE_DN=ou=users,dc=example,dc=com
# LDAP_BIND_DN_TEMPLATE=uid={username},ou=users,{base_dn}
# LDAP_USER_FILTER=(uid={username})
# LDAP_DEFAULT_ROLE=employee
# LDAP_ROLE_MAPPING={"CN=Admins,DC=example,DC=com": "admin"}

# =============================================================================
# SAML 2.0 設定（AUTH_PROVIDER=saml 時に使用）
# =============================================================================
# SAML_IDP_METADATA_URL=https://your-idp.example.com/metadata
# SAML_SP_ENTITY_ID=auth-service
# SAML_ACS_URL=http://localhost:8010/auth/saml/acs

# =============================================================================
# Proxy Auth 設定（AUTH_PROVIDER=proxy 時に使用）
# リバースプロキシ (Nginx, Traefik 等) が信頼できるヘッダーを付与する場合
# =============================================================================
# PROXY_AUTH_HEADER=X-Remote-User
# PROXY_AUTH_SECRET=your-hmac-shared-secret
# PROXY_AUTH_MAX_SKEW_SECONDS=300
# PROXY_AUTH_REQUIRE_SIGNATURE=true
