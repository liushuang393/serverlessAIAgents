# Code Migration Assistant - MCPå·¥å…·åŒ–æ¶æ„æ€»ç»“

## ğŸ“‹ æ ¸å¿ƒè®¾è®¡ç†å¿µ

### Code Migration Assistant = Orchestratorï¼ˆç¼–æ’å™¨ï¼‰

**å…³é”®å†³ç­–**: å°†æ‰€æœ‰åŠŸèƒ½æ¨¡å—è®¾è®¡ä¸ºç‹¬ç«‹çš„MCPå·¥å…·ï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„MCPåè®®è¿›è¡Œé€šä¿¡ã€‚

---

## ğŸ¯ ä¸ºä»€ä¹ˆé€‰æ‹©MCPå·¥å…·åŒ–æ¶æ„ï¼Ÿ

### ä¼ ç»Ÿæ¶æ„çš„é—®é¢˜

```
Application (Monolithic)
  â”œâ”€ COBOLParser (å†…éƒ¨æ¨¡å—)
  â”œâ”€ JavaGenerator (å†…éƒ¨æ¨¡å—)
  â”œâ”€ CodeValidator (å†…éƒ¨æ¨¡å—)
  â”œâ”€ ReflectionPattern (å†…éƒ¨æ¨¡å—)
  â””â”€ MemorySystem (å†…éƒ¨æ¨¡å—)
```

**é—®é¢˜:**
1. **ç´§è€¦åˆ**: æ¨¡å—ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œéš¾ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
2. **éš¾ä»¥å¤ç”¨**: åŠŸèƒ½æ— æ³•è¢«å…¶ä»–åº”ç”¨ä½¿ç”¨
3. **éš¾ä»¥æ‰©å±•**: æ·»åŠ æ–°åŠŸèƒ½éœ€è¦ä¿®æ”¹æ ¸å¿ƒä»£ç 
4. **éš¾ä»¥ç»´æŠ¤**: ä»£ç åº“åºå¤§ï¼Œç»´æŠ¤æˆæœ¬é«˜
5. **éš¾ä»¥éƒ¨ç½²**: å¿…é¡»æ•´ä½“éƒ¨ç½²ï¼Œæ— æ³•ç‹¬ç«‹å‡çº§

### MCPå·¥å…·åŒ–æ¶æ„çš„ä¼˜åŠ¿

```
Application (Orchestrator)
  â”‚
  â”œâ”€ MCP Call â†’ COBOLParser Tool (ç‹¬ç«‹æœåŠ¡)
  â”œâ”€ MCP Call â†’ JavaGenerator Tool (ç‹¬ç«‹æœåŠ¡)
  â”œâ”€ MCP Call â†’ CodeValidator Tool (ç‹¬ç«‹æœåŠ¡)
  â”œâ”€ MCP Call â†’ ReflectionPattern Tool (ç‹¬ç«‹æœåŠ¡)
  â””â”€ MCP Call â†’ MemorySystem Tool (ç‹¬ç«‹æœåŠ¡)
```

**ä¼˜åŠ¿:**
1. **æ¾è€¦åˆ**: å„å·¥å…·ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²
2. **å¯å¤ç”¨**: å·¥å…·å¯ä»¥è¢«å¤šä¸ªåº”ç”¨ä½¿ç”¨
3. **å¯æ‰©å±•**: å®¹æ˜“æ·»åŠ æ–°å·¥å…·ï¼Œæ”¯æŒçƒ­æ’æ‹”
4. **æ˜“ç»´æŠ¤**: æ¯ä¸ªå·¥å…·ç‹¬ç«‹ç»´æŠ¤ï¼ŒèŒè´£æ¸…æ™°
5. **æ˜“éƒ¨ç½²**: å·¥å…·å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œå‡çº§
6. **åˆ†å¸ƒå¼**: å·¥å…·å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š
7. **æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„MCPæ¥å£ï¼Œæ˜“äºé›†æˆ

---

## ğŸ—ï¸ æ¶æ„å±‚æ¬¡

### 1. Orchestratorå±‚ï¼ˆç¼–æ’å±‚ï¼‰

**èŒè´£:**
- æ¥æ”¶ç”¨æˆ·è¯·æ±‚
- è°ƒç”¨MCPå·¥å…·
- ç®¡ç†æ•°æ®æµ
- å¤„ç†é”™è¯¯å’Œé‡è¯•
- èšåˆç»“æœ

**ä¸åš:**
- ä¸å®ç°å…·ä½“çš„è§£æã€ç”Ÿæˆã€éªŒè¯é€»è¾‘
- ä¸ç›´æ¥æ“ä½œæ•°æ®åº“æˆ–æ–‡ä»¶ç³»ç»Ÿ
- ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘

### 2. MCP Protocolå±‚ï¼ˆåè®®å±‚ï¼‰

**èŒè´£:**
- æ ‡å‡†åŒ–æ¥å£è°ƒç”¨
- JSONåºåˆ—åŒ–/ååºåˆ—åŒ–
- å·¥å…·å‘ç°å’Œç‰ˆæœ¬ç®¡ç†
- é”™è¯¯å¤„ç†å’Œé‡è¯•

### 3. MCP Toolså±‚ï¼ˆå·¥å…·å±‚ï¼‰

#### 3.1 æ ¸å¿ƒå·¥å…·å±‚ï¼ˆCore Toolsï¼‰
- **COBOLParser**: COBOLæºä»£ç è§£æ
- **JavaGenerator**: Javaä»£ç ç”Ÿæˆ
- **CodeValidator**: ä»£ç éªŒè¯å’Œè´¨é‡è¯„ä¼°

#### 3.2 è¾…åŠ©å·¥å…·å±‚ï¼ˆAuxiliary Toolsï¼‰
- **SyntaxChecker**: è¯­æ³•æ£€æŸ¥
- **StyleChecker**: ä»£ç é£æ ¼æ£€æŸ¥
- **TestGenerator**: æµ‹è¯•ä»£ç ç”Ÿæˆ
- **ComplexityAnalyzer**: ä»£ç å¤æ‚åº¦åˆ†æ

#### 3.3 åŸºç›¤å·¥å…·å±‚ï¼ˆFoundation Toolsï¼‰
- **ReflectionPattern**: åå°„æ¨¡å¼ç¼–æ’
- **MemorySystem**: è®°å¿†ç³»ç»Ÿ
- **LLMClient**: LLMè°ƒç”¨

---

## ğŸ”„ å®Œæ•´å·¥å…·è°ƒç”¨æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Request                              â”‚
â”‚                  "Migrate COBOL to Java"                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Orchestrator (Code Migration Assistant)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Step 1: Parse COBOL                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MCP Call: COBOLParser Tool                          â”‚   â”‚
â”‚  â”‚ Input: {cobol_code: "..."}                          â”‚   â”‚
â”‚  â”‚ Output: {ast: {...}, metadata: {...}}               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                 â”‚
â”‚                             â–¼                                 â”‚
â”‚  Step 2: Recall Patterns                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MCP Call: MemorySystem Tool                         â”‚   â”‚
â”‚  â”‚ Operation: recall                                   â”‚   â”‚
â”‚  â”‚ Input: {topic: "migration_pattern"}                 â”‚   â”‚
â”‚  â”‚ Output: {memories: [...]}                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                 â”‚
â”‚                             â–¼                                 â”‚
â”‚  Step 3: Reflection Loop                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MCP Call: ReflectionPattern Tool                    â”‚   â”‚
â”‚  â”‚ Input: {                                            â”‚   â”‚
â”‚  â”‚   generator_tool: "java_generator",                 â”‚   â”‚
â”‚  â”‚   evaluator_tool: "code_validator",                 â”‚   â”‚
â”‚  â”‚   improver_tool: "java_generator",                  â”‚   â”‚
â”‚  â”‚   initial_input: {ast, patterns}                    â”‚   â”‚
â”‚  â”‚ }                                                   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ å†…éƒ¨æµç¨‹:                                            â”‚   â”‚
â”‚  â”‚   â”œâ”€ MCP Call: JavaGenerator (generate)            â”‚   â”‚
â”‚  â”‚   â”œâ”€ MCP Call: CodeValidator (evaluate)            â”‚   â”‚
â”‚  â”‚   â”œâ”€ MCP Call: JavaGenerator (improve)             â”‚   â”‚
â”‚  â”‚   â””â”€ é‡å¤æœ€å¤š3æ¬¡                                    â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Output: {                                           â”‚   â”‚
â”‚  â”‚   final_output: "Java code",                        â”‚   â”‚
â”‚  â”‚   final_score: 88.5,                                â”‚   â”‚
â”‚  â”‚   iterations: 2                                     â”‚   â”‚
â”‚  â”‚ }                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                 â”‚
â”‚                             â–¼                                 â”‚
â”‚  Step 4: Store Result                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MCP Call: MemorySystem Tool                         â”‚   â”‚
â”‚  â”‚ Operation: remember                                 â”‚   â”‚
â”‚  â”‚ Input: {                                            â”‚   â”‚
â”‚  â”‚   content: "Migration: CALCULATOR",                 â”‚   â”‚
â”‚  â”‚   topic: "migration_history",                       â”‚   â”‚
â”‚  â”‚   metadata: {score: 88.5}                           â”‚   â”‚
â”‚  â”‚ }                                                   â”‚   â”‚
â”‚  â”‚ Output: {success: true}                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Final Result                              â”‚
â”‚  {                                                           â”‚
â”‚    java_code: "...",                                         â”‚
â”‚    score: 88.5,                                              â”‚
â”‚    iterations: 2                                             â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š MCPå·¥å…·æ ‡å‡†æ¥å£

### æ ‡å‡†è¾“å…¥æ ¼å¼

```json
{
  "tool": "tool_name",
  "version": "1.0.0",
  "input": {
    // å·¥å…·ç‰¹å®šçš„è¾“å…¥å‚æ•°
  }
}
```

### æ ‡å‡†è¾“å‡ºæ ¼å¼

```json
{
  "success": true,
  "output": {
    // å·¥å…·ç‰¹å®šçš„è¾“å‡ºæ•°æ®
  },
  "metadata": {
    "execution_time": 1.23,
    "tool_version": "1.0.0",
    "timestamp": "2025-01-20T10:30:00Z"
  },
  "errors": []
}
```

### é”™è¯¯è¾“å‡ºæ ¼å¼

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Error message",
    "details": {
      // é”™è¯¯è¯¦æƒ…
    }
  },
  "metadata": {
    "execution_time": 0.5,
    "tool_version": "1.0.0",
    "timestamp": "2025-01-20T10:30:00Z"
  }
}
```

---

## ğŸ¯ å®æ–½è®¡åˆ’

### Phase 1: æ ¸å¿ƒå·¥å…·å®ç°
1. âœ… è®¾è®¡å®Œæˆ
2. â­ï¸ å®ç° COBOLParser MCP Tool
3. â­ï¸ å®ç° JavaGenerator MCP Tool
4. â­ï¸ å®ç° CodeValidator MCP Tool

### Phase 2: åŸºç›¤å·¥å…·å®ç°
5. â­ï¸ å®ç° ReflectionPattern MCP Tool
6. â­ï¸ å®ç° MemorySystem MCP Tool
7. â­ï¸ å®ç° LLMClient MCP Tool

### Phase 3: Orchestratorå®ç°
8. â­ï¸ å®ç° CodeMigrationOrchestrator
9. â­ï¸ å®ç° MCP Client
10. â­ï¸ é›†æˆæµ‹è¯•

### Phase 4: è¾…åŠ©å·¥å…·å®ç°ï¼ˆå¯é€‰ï¼‰
11. â­ï¸ å®ç° SyntaxChecker MCP Tool
12. â­ï¸ å®ç° StyleChecker MCP Tool
13. â­ï¸ å®ç° TestGenerator MCP Tool
14. â­ï¸ å®ç° ComplexityAnalyzer MCP Tool

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **[ARCHITECTURE.md](./ARCHITECTURE.md)** - å®Œæ•´æ¶æ„è®¾è®¡
2. **[MCP_TOOLS_DESIGN.md](./MCP_TOOLS_DESIGN.md)** - MCPå·¥å…·è¯¦ç»†è®¾è®¡
3. **[COMPONENT_DESIGN.md](./COMPONENT_DESIGN.md)** - ç»„ä»¶è¯¦ç»†è®¾è®¡
4. **[REFLECTION_INTEGRATION.md](./REFLECTION_INTEGRATION.md)** - Reflection Patterné›†æˆ
5. **[MEMORY_INTEGRATION.md](./MEMORY_INTEGRATION.md)** - Memory Systemé›†æˆ

---

## ğŸš€ ä¸‹ä¸€æ­¥

**å½“å‰çŠ¶æ€**: è®¾è®¡é˜¶æ®µå®Œæˆ âœ…

**ä¸‹ä¸€æ­¥**: å¼€å§‹å®ç°MCPå·¥å…·

**æ¨èé¡ºåº**:
1. COBOLParser MCP Toolï¼ˆåŸºç¡€ï¼‰
2. JavaGenerator MCP Toolï¼ˆæ ¸å¿ƒï¼‰
3. CodeValidator MCP Toolï¼ˆæ ¸å¿ƒï¼‰
4. ReflectionPattern MCP Toolï¼ˆç¼–æ’ï¼‰
5. MemorySystem MCP Toolï¼ˆå­¦ä¹ ï¼‰
6. Orchestratorï¼ˆé›†æˆï¼‰

