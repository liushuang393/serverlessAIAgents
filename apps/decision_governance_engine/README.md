# Decision Governance Engine

ä¼æ¥­ç´šæ„æ€æ±ºå®šæ”¯æ´ã‚·ã‚¹ãƒ†ãƒ  - PipelineEngine ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹ Multi-Agent ã‚·ã‚¹ãƒ†ãƒ 

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

Decision Governance Engine ã¯ã€ä¼æ¥­ã®é‡è¦ãªæ„æ€æ±ºå®šã‚’æ”¯æ´ã™ã‚‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
**AgentFlow ã® PipelineEngine ãƒ‘ã‚¿ãƒ¼ãƒ³** ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

### Engine Pattern

```python
from apps.decision_governance_engine import DecisionEngine

# åŒæœŸå®Ÿè¡Œ
engine = DecisionEngine()
result = await engine.run({"question": "æ–°è¦äº‹æ¥­ã¸ã®æŠ•è³‡åˆ¤æ–­ã‚’ã—ãŸã„"})

# SSEã‚¹ãƒˆãƒªãƒ¼ãƒ 
async for event in engine.run_stream(inputs):
    print(event)
```

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PipelineEngine (agentflow/engines/pipeline_engine.py)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ å‰å‡¦ç†å±¤: CognitiveGateï¼ˆèªçŸ¥åˆ†æï¼‰â†’ Gatekeeperï¼ˆé–€ç•ªï¼‰ â”‚â”‚
â”‚  â”‚ è¨ºæ–­å±¤: Clarificationï¼ˆå•é¡Œç²¾ç·»åŒ–ï¼‰                     â”‚â”‚
â”‚  â”‚ åˆ†æå±¤: Dao â†’ Fa â†’ Shu â†’ Qiï¼ˆé †æ¬¡å®Ÿè¡Œã€ä¾å­˜ãƒã‚§ãƒ¼ãƒ³ï¼‰   â”‚â”‚
â”‚  â”‚ æ¤œè¨¼å±¤: ReviewAgent (REVISEå›é€€å¯¾å¿œ)                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:
```
CognitiveGate â†’ Gatekeeper â†’ Clarification â†’ Dao â†’ Fa â†’ Shu â†’ Qi â†’ Review
     â†“              â†“                                              â†“
   åˆ†æã®ã¿      æ‹¦æˆªåˆ¤æ–­                                    PASS/REVISE/REJECT
   (é€šé)      (ä¸é©æ ¼æ‹’å¦)                                   (REVISEã¯Daoã¸æˆ»ã‚‹)
```

### å‰å¾Œç«¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (React + TypeScript)                              â”‚
â”‚  - UIè¡¨ç¤ºã€é€²æ—è¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚ HTTP / SSE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API (FastAPI)                                      â”‚
â”‚  - api.py â†’ routers/ â†’ DecisionEngine                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DecisionEngine (engine.py)                                 â”‚
â”‚  - PipelineEngine ã‚’ç¶™æ‰¿                                    â”‚
â”‚  - run() / run_stream() API                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å„Agent (agents/*.py) + AgentRegistry                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚³ã‚¢æ¦‚å¿µ

| å±¤ | Agent | å½¹å‰² |
|---|-------|------|
| ğŸ§  èªçŸ¥ | CognitiveGateAgent | èªçŸ¥å‰å‡¦ç†ï¼ˆè©•ä¾¡å¯¾è±¡ãƒ»æ„å›³ãƒ»åŸºæº–ãƒ»ä¸å¯é€†æ€§ã®ç‰¹å®šï¼‰|
| ğŸšª é–€ç•ª | GatekeeperAgent | ä¸é©æ ¼ãªè³ªå•ã‚’é–€å‰æ‰•ã„ï¼ˆGateåˆ¤æ–­ï¼‰ |
| ğŸ” è¨ºæ–­ | ClarificationAgent | è«–ç†çš„ç©´ãƒ»æš—é»™ã®ä»®å®šãƒ»èªçŸ¥ãƒã‚¤ã‚¢ã‚¹ç‰¹å®š |
| ğŸ¯ é“ | DaoAgent | å•é¡Œã®æœ¬è³ªæŠ½å‡ºã€å› æœé½¿è½®åˆ†æ |
| âš–ï¸ æ³• | FaAgent | æˆ¦ç•¥ãƒ‘ã‚¹è©•ä¾¡ï¼ˆç¨³å¥å‹ vs æ¿€è¿›å‹ï¼‰ |
| ğŸ“‹ è¡“ | ShuAgent | å…·ä½“çš„å®Ÿè¡Œè¨ˆç”»ç­–å®š |
| ğŸ”§ å™¨ | QiAgent | æŠ€è¡“å®Ÿè£…æ–¹é‡ç­–å®š |
| âœ… æ¤œè¨¼ | ReviewAgent | å…¨å±¤æ¤œè¨¼ãƒ»æœ€çµ‚åˆ¤å®šï¼ˆPASS/REVISE/REJECTï¼‰ |

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰:**
- Python 3.13+
- FastAPIï¼ˆWeb APIï¼‰
- Pydantic v2ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- asyncioï¼ˆéåŒæœŸå‡¦ç†ï¼‰

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:**
- React 18 + TypeScript
- Viteï¼ˆãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ï¼‰
- Tailwind CSS
- Zustandï¼ˆçŠ¶æ…‹ç®¡ç†ï¼‰

---

## 2. æ©Ÿèƒ½ä¸€è¦§

### 2.1 API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/api/health` | GET | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |
| `/api/agents` | GET | Agentå®šç¾©å–å¾— |
| `/api/decision` | POST | åŒæœŸçš„æ„æ€æ±ºå®šå‡¦ç† |
| `/api/decision/stream` | GET | SSEã‚¹ãƒˆãƒªãƒ¼ãƒ ä»˜ãå‡¦ç† |
| `/ws/decision` | WebSocket | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—é€šçŸ¥ |
| `/api/report/{id}/pdf` | GET | PDFã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ |
| `/api/report/{id}/components` | GET | A2UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå–å¾— |
| `/api/report/{id}/agent/{agent_id}` | GET | å€‹åˆ¥Agentå‡ºåŠ›å–å¾— |
| `/api/workflow/config` | GET | Studio UIè¨­å®šå–å¾— |

**PDFã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®æ³¨æ„ï¼ˆé‡è¦ï¼‰**
- `/api/report/{id}/pdf` ã® `{id}` ã¯ **UUIDï¼ˆrequest_idï¼‰** ã‚’æ¨å¥¨ï¼ˆå±¥æ­´DBã‹ã‚‰å¾©å…ƒã§ãã‚‹ãŸã‚ï¼‰
- ç”»é¢è¡¨ç¤ºç”¨ã® `report_id`ï¼ˆ`PROP-...`ï¼‰ã¯ææ¡ˆæ›¸ã®æ¡ˆä»¶IDã§ã‚ã‚Šã€ç’°å¢ƒã«ã‚ˆã£ã¦ã¯æ°¸ç¶šåŒ–ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ `request_id` ãŒå–å¾—ã§ãã‚‹å ´åˆã€PDFå‡ºåŠ›ã« `request_id` ã‚’ä½¿ç”¨ã—ã¾ã™

### 2.2 å…¥åŠ›ã‚¹ã‚­ãƒ¼ãƒ

```python
# DecisionRequestï¼ˆå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
{
    "question": "æ„æ€æ±ºå®šã®è³ªå•ï¼ˆ10ã€œ2000å­—ï¼‰",
    "constraints": {
        "budget": {"amount": 500, "currency": "JPY"},
        "timeline": {"months": 6},
        "technical": ["Python", "AWS"],
        "regulatory": ["GDPR"]
    }
}
```

### 2.3 å‡ºåŠ›ãƒ¬ãƒãƒ¼ãƒˆ

- ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ï¼ˆ30å­—ä»¥å†…ã®ä¸€æ–‡çµè«–ï¼‰
- é“ï¼ˆæœ¬è³ªï¼‰åˆ†æçµæœ
- æ³•ï¼ˆæˆ¦ç•¥ï¼‰ãƒ‘ã‚¹è©•ä¾¡
- è¡“ï¼ˆè¨ˆç”»ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºå®šç¾©
- å™¨ï¼ˆæŠ€è¡“ï¼‰å®Ÿè£…æ–¹é‡
- æ¤œè¨¼çµæœãƒ»ç½²åæ¬„

---

## 3. ä½¿ç”¨æ–¹æ³•

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ **Web UIï¼ˆæ¨å¥¨ï¼‰** ã¨ **CLI** ã®2ã¤ã®åˆ©ç”¨æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚

| æ–¹æ³• | ç”¨é€” | å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
|-----|------|------------|
| ğŸ–¥ï¸ Web UI | ãƒ¡ã‚¤ãƒ³åˆ©ç”¨æ–¹æ³•ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤º | CEO/CFO/CTOç­‰ã®çµŒå–¶å±¤ |
| âŒ¨ï¸ CLI | ãƒãƒƒãƒå‡¦ç†ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆé€£æº | é–‹ç™ºè€…ãƒ»è‡ªå‹•åŒ–ç”¨é€” |

---

## 4. ç’°å¢ƒæ§‹ç¯‰ï¼ˆæ–°è¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰

**è©³ç´°ãªæ‰‹é †ã¯ [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](../../INSTALLATION_GUIDE_JA.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚**

### 4.1 å‰ææ¡ä»¶

| é …ç›® | è¦ä»¶ |
|-----|------|
| Python | 3.13ä»¥ä¸Š |
| Node.js | 18ä»¥ä¸Š |
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ | pip, npm |
| API Key | OpenAI / Anthropic / Geminiï¼ˆã„ãšã‚Œã‹1ã¤ä»¥ä¸Šï¼‰ |

### 4.2 ã‚¯ã‚¤ãƒƒã‚¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§ AgentFlow ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e .

# 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd apps/decision_governance_engine/frontend
npm install

# 3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼ˆ.env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼‰
cd ../../..
echo "OPENAI_API_KEY=" > .env
```
# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
# DB ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
cd apps/decision_governance_engine
docker-compose up -d postgres-main redis
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
alembic upgrade head

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¥æ­´ç¢ºèª
alembic history


# ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
alembic downgrade -1
---

## 5. èµ·å‹•æ‰‹é †

### 5.1 Web UI ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰

#### æ–¹æ³•1: Docker Composeï¼ˆæ¨å¥¨ï¼‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
cd apps/decision_governance_engine

docker compose -f docker-compose.yml -f docker-compose.dev.yml up --build -d

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰æœ‰åŠ¹ï¼‰
# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•
docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d

# ãƒ­ã‚°ç¢ºèª
docker compose -f docker-compose.yml -f docker-compose.dev.yml logs -f backend

# åœæ­¢
docker compose -f docker-compose.yml -f docker-compose.dev.yml down
```

**ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ:**
- `postgres-main`: PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒãƒ¼ãƒˆ 5432ï¼‰
- `redis`: Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒãƒ¼ãƒˆ 6379ï¼‰
- `backend`: FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆãƒãƒ¼ãƒˆ 8000ã€ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰æœ‰åŠ¹ï¼‰
- `frontend`: Vite é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ 5174ï¼‰

**ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹**
```
http://localhost:5174
```

#### æ–¹æ³•2: ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒï¼ˆæ‰‹å‹•èµ·å‹•ï¼‰

**å‰ææ¡ä»¶:**
- PostgreSQL ã¨ Redis ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨
- ç’°å¢ƒå¤‰æ•° `DATABASE_URL` ã¨ `REDIS_URL` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨

**ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIèµ·å‹•**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e ".[dev]"

# APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ8000ï¼‰
uvicorn apps.decision_governance_engine.api:app --host 0.0.0.0 --port 8000 --reload
```

**ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•**
```bash
cd apps/decision_governance_engine/frontend

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ5174ï¼‰
npm run dev
```

**ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹**
```
http://localhost:5174
```

### 5.2 å‹•ä½œç¢ºèª

```bash
# APIãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8001/api/health
# æœŸå¾…å‡ºåŠ›: {"status":"ok","version":"1.0.0"}

# Swagger UIï¼ˆAPIä»•æ§˜æ›¸ï¼‰
open http://localhost:8001/docs
```

### 5.3 CLI ãƒ¢ãƒ¼ãƒ‰ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰

```bash
# åŸºæœ¬å®Ÿè¡Œ
python -m apps.decision_governance_engine.main "æ–°è¦äº‹æ¥­Aã¨Bã®ã©ã¡ã‚‰ã«æŠ•è³‡ã™ã¹ãã‹åˆ¤æ–­ã—ãŸã„"

# åˆ¶ç´„æ¡ä»¶ä»˜ãï¼ˆäºˆç®—500ä¸‡å††ã€æœŸé–“6ãƒ¶æœˆï¼‰
python -m apps.decision_governance_engine.main "æ–°è¦äº‹æ¥­ã¸ã®æŠ•è³‡åˆ¤æ–­ã‚’ã—ãŸã„" --budget 500 --timeline 6

# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰
python -m apps.decision_governance_engine.main --interactive
```

---

## 6. ãƒ†ã‚¹ãƒˆæ‰‹é †

### 6.1 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# Decision Governance Engineå°‚ç”¨ãƒ†ã‚¹ãƒˆ
pytest tests/unit/test_decision_governance_engine.py -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
pytest tests/unit/test_decision_governance_engine.py -v \
  --cov=apps.decision_governance_engine \
  --cov-report=term-missing

# ç‰¹å®šãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®ã¿
pytest tests/unit/test_decision_governance_engine.py::TestDecisionEngine -v
```

### 6.2 çµ±åˆãƒ†ã‚¹ãƒˆ

```bash
# APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾Œ
pytest tests/integration/ -v -m "decision"
```

### 6.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

```bash
cd apps/decision_governance_engine/frontend
npm run test
npm run lint
npm run type-check
```

### 6.4 Lint/å‹ãƒã‚§ãƒƒã‚¯

```bash
# Ruffï¼ˆãƒªãƒ³ã‚¿ãƒ¼ï¼‰
ruff check apps/decision_governance_engine/

# Mypyï¼ˆå‹ãƒã‚§ãƒƒã‚¯ï¼‰
mypy apps/decision_governance_engine/
```

---

## 7. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 7.1 ãƒ“ãƒ«ãƒ‰

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
cd apps/decision_governance_engine/frontend
npm run build

# é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¯ dist/ ã«å‡ºåŠ›ã•ã‚Œã‚‹
```

### 7.2 æœ¬ç•ªèµ·å‹•

```bash
# Gunicorn + Uvicornï¼ˆæ¨å¥¨ï¼‰
gunicorn apps.decision_governance_engine.api:app \
  -w 4 \
  -k uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000

# ã¾ãŸã¯ Uvicorn å˜ä½“
uvicorn apps.decision_governance_engine.api:app \
  --host 0.0.0.0 \
  --port 8000 \
  --workers 4
```

### 7.3 Dockerï¼ˆæ¨å¥¨ï¼‰

```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
docker build -t decision-engine:latest -f Dockerfile.decision .

# ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker run -d \
  -p 8000:8000 \
  -e OPENAI_API_KEY=${OPENAI_API_KEY} \
  --name decision-engine \
  decision-engine:latest
```

### 7.4 æœ¬ç•ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ç’°å¢ƒå¤‰æ•°ï¼ˆAPIã‚­ãƒ¼ç­‰ï¼‰ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] CORSè¨­å®šãŒæœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã«é™å®šã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ãŒINFOä»¥ä¸Šã«è¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå¿œç­”ã™ã‚‹
- [ ] SSL/TLSè¨¼æ˜æ›¸ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼ˆHTTPSï¼‰

---

## 8. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
apps/decision_governance_engine/
â”œâ”€â”€ __init__.py              # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆæœŸåŒ–ï¼ˆDecisionEngine ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰
â”œâ”€â”€ engine.py                # DecisionEngineï¼ˆPipelineEngine ç¶™æ‰¿ï¼‰â˜…ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ main.py                  # CLIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ api.py                   # FastAPI REST APIï¼ˆengine.py ã‚’ä½¿ç”¨ï¼‰
â”œâ”€â”€ flow_config.py           # èµ·å‹•æ™‚è¨­å®šï¼ˆå¾Œæ–¹äº’æ›ç”¨ï¼‰
â”œâ”€â”€ startup.py               # èµ·å‹•æƒ…å ±ãƒ­ã‚°
â”œâ”€â”€ agents/                  # å„Agentã®å®Ÿè£…
â”‚   â”œâ”€â”€ agent_definitions.yaml   # Agentå®šç¾©ï¼ˆYAMLï¼‰
â”‚   â”œâ”€â”€ cognitive_gate_agent.py  # èªçŸ¥å‰å‡¦ç†
â”‚   â”œâ”€â”€ gatekeeper_agent.py      # é–€ç•ª
â”‚   â”œâ”€â”€ clarification_agent.py   # è¨ºæ–­
â”‚   â”œâ”€â”€ dao_agent.py             # é“ï¼ˆæœ¬è³ªåˆ†æï¼‰
â”‚   â”œâ”€â”€ fa_agent.py              # æ³•ï¼ˆæˆ¦ç•¥è©•ä¾¡ï¼‰
â”‚   â”œâ”€â”€ shu_agent.py             # è¡“ï¼ˆè¨ˆç”»ç­–å®šï¼‰
â”‚   â”œâ”€â”€ qi_agent.py              # å™¨ï¼ˆæŠ€è¡“å®Ÿè£…ï¼‰
â”‚   â””â”€â”€ review_agent.py          # æ¤œè¨¼ï¼ˆPASS/REVISE/REJECTï¼‰
â”œâ”€â”€ schemas/                 # Pydanticã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ services/                # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ agent_registry.py        # Agentä¸€å…ƒç®¡ç†
â”‚   â”œâ”€â”€ report_generator.py      # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚   â””â”€â”€ ui_components.py         # A2UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”Ÿæˆ
â”œâ”€â”€ routers/                 # FastAPIãƒ«ãƒ¼ã‚¿ãƒ¼
â”œâ”€â”€ prompts/                 # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ skills/                  # SKILL.mdå®šç¾©
â”œâ”€â”€ knowledge/               # çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ï¼ˆRAGç”¨ï¼‰
â””â”€â”€ frontend/                # React ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```

**é‡è¦**: 
- **ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ**: `engine.py` ã® `DecisionEngine` ã‚¯ãƒ©ã‚¹
- **API ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ**: `api.py`ï¼ˆå†…éƒ¨ã§ `engine.py` ã‚’ä½¿ç”¨ï¼‰
- **CLI ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ**: `main.py`ï¼ˆå†…éƒ¨ã§ `engine.py` ã‚’ä½¿ç”¨ï¼‰

---

## 9. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**Q: `ModuleNotFoundError: No module named 'apps'`**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã‹ã€PYTHONPATHã‚’è¨­å®š
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
```

**Q: APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼**
```bash
# ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
echo $OPENAI_API_KEY
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
cat .env
```

**Q: ãƒãƒ¼ãƒˆ8000ãŒä½¿ç”¨ä¸­**
```bash
# åˆ¥ãƒãƒ¼ãƒˆã‚’æŒ‡å®š
uvicorn apps.decision_governance_engine.api:app --port 8001
```

---

## 10. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](../../INSTALLATION_GUIDE_JA.md) - è©³ç´°ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
- [è¨­è¨ˆä»•æ§˜æ›¸](design/decision-agent-spec.md)
- [å¤‰æ›´å±¥æ­´](CHANGELOG_v2.0.md) / [CHANGELOG_v3.0.md](CHANGELOG_v3.0.md)
- [AgentFlow ãƒ¡ã‚¤ãƒ³ README](../../README.md) - ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å…¨ä½“ã®èª¬æ˜
