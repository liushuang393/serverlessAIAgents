# -*- coding: utf-8 -*-
# Decision Governance Engine - Agent Configuration v2.2
# èªçŸ¥ãƒ»é–€ç•ªãƒ»è¨ºæ–­ãƒ»é“ãƒ»æ³•ãƒ»è¡“ãƒ»å™¨ãƒ»æ¤œè¨¼ã®8å±¤æ§‹é€ ã«ã‚ˆã‚‹æ„æ€æ±ºå®šæ”¯æ´ã‚·ã‚¹ãƒ†ãƒ 

name: decision_governance_engine
version: "2.2.0"
description: |
  ä¼æ¥­ã®æ„æ€æ±ºå®šã‚’æ”¯æ´ã™ã‚‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  v2.2ã€‚
  èªçŸ¥â†’é–€ç•ªâ†’è¨ºæ–­â†’é“ï¼ˆæœ¬è³ªï¼‰â†’æ³•ï¼ˆæˆ¦ç•¥ï¼‰â†’è¡“ï¼ˆè¨ˆç”»ï¼‰â†’å™¨ï¼ˆå®Ÿè£…ï¼‰â†’æ¤œè¨¼ã®8å±¤ã§æ§‹é€ åŒ–ã•ã‚ŒãŸåˆ†æã‚’æä¾›ã€‚
  
  v2.2æ–°æ©Ÿèƒ½:
  - CognitiveGateAgentï¼ˆèªçŸ¥å‰å‡¦ç†ï¼‰è¿½åŠ ï¼šè©•ä¾¡å¯¾è±¡ãƒ»å‹•æ©Ÿãƒ»è©•ä¾¡è»¸ãƒ»ä¸å¯é€†æ€§ã‚’æ¤œæŸ»
  v2.0æ–°æ©Ÿèƒ½:
  - ClarificationAgentï¼ˆå•é¡Œè¨ºæ–­ï¼‰è¿½åŠ ï¼šè«–ç†çš„ãªç©´ã€æš—é»™ã®ä»®å®šã€èªçŸ¥ãƒã‚¤ã‚¢ã‚¹ã‚’ç‰¹å®š
  - DaoAgentå¼·åŒ–ï¼šå› æœé½¿è½®ã«ã‚ˆã‚‹æ§‹é€ åŒ–ã€æ­»ç©´ï¼ˆç¦å¿Œï¼‰åˆ†æ

# Agentå®šç¾©
agents:
  cognitive_gate:
    name: CognitiveGateAgent
    description: èªçŸ¥å‰å‡¦ç†Agent - é“æ³•è¡“å™¨ã®åˆ†æã«å…¥ã‚‹å‰ã«èªçŸ¥çš„å‰ææ¡ä»¶ã‚’æ¤œæŸ»
    class: apps.decision_governance_engine.agents.CognitiveGateAgent
    config:
      max_tokens: 400
      temperature: 0.2
      use_rag: false
    outputs:
      - proceed
      - missing_info
      - clarification_questions

  gatekeeper:
    name: GatekeeperAgent
    description: å…¥å£æ¤œè¨¼Agent - ä¸é©æ ¼ãªå•é¡Œã‚’é–€å‰æ‰•ã„
    class: apps.decision_governance_engine.agents.GatekeeperAgent
    config:
      max_tokens: 300
      temperature: 0.1
      use_rag: false

  clarification:
    name: ClarificationAgent
    description: å•é¡Œè¨ºæ–­Agent - è³ªå•ã‚’æ·±ãè¨ºæ–­ã—ã€è«–ç†çš„ç©´ãƒ»æš—é»™ã®ä»®å®šãƒ»èªçŸ¥ãƒã‚¤ã‚¢ã‚¹ã‚’ç‰¹å®š
    class: apps.decision_governance_engine.agents.ClarificationAgent
    config:
      max_tokens: 600
      temperature: 0.3
      use_rag: false
    outputs:
      - restated_question
      - ambiguities
      - hidden_assumptions
      - cognitive_biases
      - refined_question

  dao:
    name: DaoAgent
    description: æœ¬è³ªåˆ¤å®šAgentï¼ˆé“ï¼‰v2.0 - å•é¡Œã®æœ¬è³ªã‚’æŠ½å‡ºã€å› æœé½¿è½®ã§æ§‹é€ åŒ–ã€æ­»ç©´åˆ†æ
    class: apps.decision_governance_engine.agents.DaoAgent
    config:
      max_tokens: 800
      temperature: 0.3
      use_rag: false
    outputs:
      - problem_type
      - essence
      - immutable_constraints
      - hidden_assumptions
      - causal_gears        # NEW: å› æœé½¿è½®
      - bottleneck_gear     # NEW: ç“¶é¢ˆé½¿è½®
      - death_traps         # NEW: æ­»ç©´ï¼ˆç¦å¿Œï¼‰

  fa:
    name: FaAgent
    description: æˆ¦ç•¥é¸å®šAgentï¼ˆæ³•ï¼‰v2.0 - ç¨³å¥å‹ vs æ¿€è¿›å‹ã®å¯¾æ¯”ã‚’å«ã‚€æˆ¦ç•¥ãƒ‘ã‚¹è©•ä¾¡
    class: apps.decision_governance_engine.agents.FaAgent
    config:
      max_tokens: 1200
      temperature: 0.4
      use_rag: false
      max_recommended_paths: 2
    outputs:
      - recommended_paths     # æ¨å¥¨ãƒ‘ã‚¹ï¼ˆç¨³å¥å‹ + æ¿€è¿›å‹ï¼‰
      - rejected_paths        # ä¸æ¨å¥¨ãƒ‘ã‚¹
      - decision_criteria     # åˆ¤æ–­åŸºæº–
      - path_comparison       # NEW: æ¯”è¼ƒãƒãƒˆãƒªãƒƒã‚¯ã‚¹
    strategy_types:
      - CONSERVATIVE  # ç¨³å¥å‹
      - AGGRESSIVE    # æ¿€è¿›å‹
      - BALANCED      # ãƒãƒ©ãƒ³ã‚¹å‹

  shu:
    name: ShuAgent
    description: å®Ÿè¡Œè¨ˆç”»Agentï¼ˆè¡“ï¼‰- å…·ä½“çš„ãªå®Ÿè¡Œè¨ˆç”»ã‚’ç­–å®š
    class: apps.decision_governance_engine.agents.ShuAgent
    config:
      max_tokens: 1000
      temperature: 0.5
      use_rag: true
      rag_sources:
        - industry_practices
        - case_studies

  qi:
    name: QiAgent
    description: æŠ€è¡“å®Ÿè£…Agentï¼ˆå™¨ï¼‰- æŠ€è¡“çš„ãªå®Ÿè£…æ–¹é‡ã‚’ç­–å®š
    class: apps.decision_governance_engine.agents.QiAgent
    config:
      max_tokens: 1200
      temperature: 0.6
      use_rag: true
      rag_sources:
        - technical_docs
        - compliance

  review:
    name: ReviewAgent
    description: æ¤œè¨¼Agent - å…¨å±¤ã®çµæœã‚’æ¤œè¨¼ã—æœ€çµ‚åˆ¤å®š
    class: apps.decision_governance_engine.agents.ReviewAgent
    config:
      max_tokens: 1500
      temperature: 0.7
      mandatory_checks:
        - è²¬ä»»è€…ãŒæ˜ç¢ºã‹
        - æœ€æ‚ªã‚±ãƒ¼ã‚¹ã®æƒ³å®šãŒã‚ã‚‹ã‹
        - æ’¤é€€æ¡ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
        - æœ€åˆã®ä¸€æ­©ãŒæ˜æ—¥å®Ÿè¡Œå¯èƒ½ã‹
        - æ­»ç©´ï¼ˆç¦å¿Œï¼‰ãŒå›é¿ã•ã‚Œã¦ã„ã‚‹ã‹  # NEW

# Workflowå®šç¾©
workflow:
  type: sequential
  pattern: multi_agent
  stages:
    - name: cognitive
      agent: cognitive_gate
      on_reject: request_clarification
      description: èªçŸ¥å‰å‡¦ç†ï¼ˆè©•ä¾¡å¯¾è±¡ãƒ»å‹•æ©Ÿãƒ»è©•ä¾¡è»¸ãƒ»ä¸å¯é€†æ€§æ¤œæŸ»ï¼‰
    - name: gate
      agent: gatekeeper
      on_reject: terminate
    - name: diagnosis
      agent: clarification
      description: å•é¡Œè¨ºæ–­ï¼ˆè«–ç†ç©´ãƒ»ä»®å®šãƒ»ãƒã‚¤ã‚¢ã‚¹ç‰¹å®šï¼‰
    - name: essence
      agent: dao
      description: æœ¬è³ªåˆ†æ + å› æœé½¿è½® + æ­»ç©´ç‰¹å®š
    - name: strategy
      agent: fa
    - name: planning
      agent: shu
    - name: implementation
      agent: qi
    - name: verification
      agent: review
      on_revise: rollback  # REVISEã®å ´åˆã¯è©²å½“Agentã«å›é€€

# Studio UIï¼ˆReact Flowï¼‰ç”¨ãƒãƒ¼ãƒ‰å®šç¾©
studio:
  enabled: true
  title: Decision Governance Engine v2.2
  description: èªçŸ¥â†’é–€ç•ªâ†’è¨ºæ–­â†’é“ãƒ»æ³•ãƒ»è¡“ãƒ»å™¨â†’æ¤œè¨¼ã«ã‚ˆã‚‹æ„æ€æ±ºå®šãƒ•ãƒ­ãƒ¼
  nodes:
    - id: cognitive_gate
      type: agent
      label: èªçŸ¥
      icon: "ğŸ§ "
      position: { x: 50, y: 200 }
      style:
        background: "#fef3c7"
        border: "#f59e0b"
    - id: gatekeeper
      type: agent
      label: é–€ç•ª
      icon: "ğŸšª"
      position: { x: 150, y: 200 }
      style:
        background: "#f3f4f6"
        border: "#374151"
    - id: clarification
      type: agent
      label: è¨ºæ–­
      icon: "ğŸ”"
      position: { x: 200, y: 200 }
      style:
        background: "#fdf4ff"
        border: "#a855f7"
    - id: dao
      type: agent
      label: é“ï¼ˆæœ¬è³ªï¼‰
      icon: "ğŸ¯"
      position: { x: 350, y: 200 }
      style:
        background: "#dbeafe"
        border: "#2563eb"
    - id: fa
      type: agent
      label: æ³•ï¼ˆæˆ¦ç•¥ï¼‰
      icon: "âš–ï¸"
      position: { x: 500, y: 200 }
      style:
        background: "#dcfce7"
        border: "#16a34a"
    - id: shu
      type: agent
      label: è¡“ï¼ˆè¨ˆç”»ï¼‰
      icon: "ğŸ“‹"
      position: { x: 650, y: 200 }
      style:
        background: "#fef3c7"
        border: "#d97706"
    - id: qi
      type: agent
      label: å™¨ï¼ˆå®Ÿè£…ï¼‰
      icon: "ğŸ”§"
      position: { x: 800, y: 200 }
      style:
        background: "#fce7f3"
        border: "#db2777"
    - id: review
      type: agent
      label: æ¤œè¨¼
      icon: "âœ…"
      position: { x: 950, y: 200 }
      style:
        background: "#f0fdf4"
        border: "#15803d"
    - id: reject_exit
      type: output
      label: æ‹’å¦
      icon: "âŒ"
      position: { x: 100, y: 350 }
      style:
        background: "#fee2e2"
        border: "#dc2626"
    - id: report_output
      type: output
      label: ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›
      icon: "ğŸ“„"
      position: { x: 950, y: 350 }
      style:
        background: "#e0f2fe"
        border: "#0284c7"
  edges:
    - source: cognitive_gate
      target: gatekeeper
      label: é€šé
      condition: proceed
    - source: cognitive_gate
      target: reject_exit
      label: è£œè¶³è¦æ±‚
      condition: "!proceed"
      style:
        stroke: "#f59e0b"
        strokeDasharray: "5,5"
    - source: gatekeeper
      target: clarification
      label: å—ç†
      condition: is_acceptable
    - source: gatekeeper
      target: reject_exit
      label: æ‹’å¦
      condition: "!is_acceptable"
      style:
        stroke: "#dc2626"
        strokeDasharray: "5,5"
    - source: clarification
      target: dao
      label: è¨ºæ–­å®Œäº†
    - source: dao
      target: fa
    - source: fa
      target: shu
    - source: shu
      target: qi
    - source: qi
      target: review
    - source: review
      target: report_output
      label: PASS
      condition: "verdict == PASS"
    - source: review
      target: clarification
      label: REVISE
      condition: "verdict == REVISE"
      style:
        stroke: "#d97706"
        strokeDasharray: "3,3"
    - source: review
      target: reject_exit
      label: REJECT
      condition: "verdict == REJECT"
      style:
        stroke: "#dc2626"
        strokeDasharray: "5,5"

# å‡ºåŠ›è¨­å®š
output:
  format: decision_report
  version: "2.0"
  include_sections:
    - executive_summary
    - clarification_diagnosis  # NEW
    - dao_analysis
    - causal_gears             # NEW
    - death_traps              # NEW
    - fa_strategy
    - shu_plan
    - qi_implementation
    - review_findings
  signature_required: true

# RAGè¨­å®š
rag:
  enabled: true
  sources:
    industry_practices:
      type: vector_store
      description: æ¥­ç•Œãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
    case_studies:
      type: vector_store
      description: éå»ã®äº‹ä¾‹
    technical_docs:
      type: vector_store
      description: æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    compliance:
      type: vector_store
      description: ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦å®š

# ãƒ­ã‚°è¨­å®š
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  handlers:
    - console
    - file
  file_path: logs/decision_engine.log
