# ä¼æ¥­ç´šæ±ºç­–Agentå¹³å° å®Œæ•´æŠ€è¡“ä»•æ§˜æ›¸

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ã‚³ã‚¢ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ˆä¸å¯å¤‰ï¼‰
```
è¤‡é›‘ãªå•é¡Œ â†’ æ­£ç¢ºãªæ„æ€æ±ºå®š â†’ å®Ÿè¡Œå¯èƒ½ãªãƒ—ãƒ©ãƒ³
ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦å›ºå®šåŒ–ã—ãŸã€ä¼æ¥­ç´šæ±ºç­–Agentå¹³å°ã€‘
```

### 1.2 æ ¸å¿ƒã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å®šç¾©
| ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | æ„å‘³ | ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ |
|-----------|------|---------------|
| æ±ºç­– | æ§‹é€ åŒ–ã•ã‚ŒãŸæ„æ€æ±ºå®šå‡ºåŠ› | âŒ é›‘è«‡ãƒ»è‡ªç”±å›ç­” |
| ä¼æ¥­ç´š | è²¬ä»»è€…å‘ã‘ã€ç½²åå¯èƒ½ãªçµè«– | âŒ å€‹äººå‘ã‘ã‚¢ãƒ‰ãƒã‚¤ã‚¹ |
| ã‚·ã‚¹ãƒ†ãƒ  | å†ç¾å¯èƒ½ãƒ»è¿½è·¡å¯èƒ½ãªãƒ—ãƒ­ã‚»ã‚¹ | âŒ äººä¾å­˜ãƒ»å±äººåŒ– |

### 1.3 çµ¶å¯¾ã«ã‚„ã‚‰ãªã„ã“ã¨ï¼ˆãƒã‚¬ãƒ†ã‚£ãƒ–ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰
- âŒ ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆçš„ãªè‡ªç”±ä¼šè©±
- âŒ è¤‡æ•°äººã¸ã®åŒæ™‚æ„æ€æ±ºå®šæ”¯æ´
- âŒ å…¨è‡ªå‹•æ„æ€æ±ºå®šï¼ˆäººé–“ã®æ‰¿èªãªã—ï¼‰
- âŒ ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã®è²©å£²
- âŒ å“²å­¦çš„è­°è«–ãƒ»æŠ½è±¡çš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹

---

## 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (Next.js)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å…¥åŠ›ç”»é¢ â”‚â†’â”‚ é€²æ—è¡¨ç¤º â”‚â†’â”‚ çµæœè¡¨ç¤º â”‚â†’â”‚ ãƒ¬ãƒãƒ¼ãƒˆExport  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ REST API / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend (FastAPI)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Decision Flow Engine                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚DaoAgentâ”‚â†’â”‚FaAgent â”‚â†’â”‚ShuAgentâ”‚â†’â”‚QiAgent â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚       â”‚                                    â”‚          â”‚   â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â”‚                  â–¼            â–¼                       â”‚   â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚              â”‚   ReviewAgent      â”‚ â† å…¨å±¤æ¤œè¨¼       â”‚   â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LLM Gateway  â”‚  â”‚ State Machine â”‚  â”‚ RAG Service    â”‚  â”‚
â”‚  â”‚  (æŠ½è±¡åŒ–å±¤)   â”‚  â”‚ (çŠ¶æ…‹ç®¡ç†)    â”‚  â”‚ (Shu/Qiå°‚ç”¨)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚PostgreSQLâ”‚    â”‚  Redis  â”‚    â”‚  S3/Minioâ”‚
    â”‚(å±¥æ­´/çµæœ)â”‚    â”‚(ã‚»ãƒƒã‚·ãƒ§ãƒ³)â”‚   â”‚(ãƒ¬ãƒãƒ¼ãƒˆ)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Agenté–“ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆçŠ¶æ…‹æ©Ÿæ¢°ï¼‰
```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚              State Machine Flow             â”‚
           â”‚                                             â”‚
           â”‚  INPUT â†’ [PENDING] â†’ [DAO] â†’ [FA] â†’ [SHU]  â”‚
           â”‚                         â”‚       â”‚      â”‚    â”‚
           â”‚                         â–¼       â–¼      â–¼    â”‚
           â”‚  REVIEW â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
           â”‚    â”‚                                        â”‚
           â”‚    â”œâ”€ PASS â†’ [QI] â†’ [FINAL] â†’ OUTPUT      â”‚
           â”‚    â”‚                                        â”‚
           â”‚    â””â”€ FAIL â†’ [REVISION] â†’ è©²å½“Agentå†å®Ÿè¡Œ â”‚
           â”‚                                             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ…‹é·ç§»ãƒ«ãƒ¼ãƒ«ï¼ˆå³æ ¼ï¼‰:
- é †æ–¹å‘ã®ã¿è¨±å¯ï¼ˆDaoã‹ã‚‰Faã‚’é£›ã°ã—ã¦Shuã¯ä¸å¯ï¼‰
- ReviewAgentã®ã¿é€†æ–¹å‘é·ç§»ã‚’ç™ºè¡Œå¯èƒ½
- å„çŠ¶æ…‹ã§ã®æœ€å¤§æ»åœ¨æ™‚é–“: 30ç§’
- æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°: å„Agent 2å›ã¾ã§
```

---

## 3. Agentè©³ç´°è¨­è¨ˆ

### 3.1 å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¦ç´„
```python
from abc import ABC, abstractmethod
from pydantic import BaseModel
from typing import Generic, TypeVar

InputT = TypeVar('InputT', bound=BaseModel)
OutputT = TypeVar('OutputT', bound=BaseModel)

class BaseAgent(ABC, Generic[InputT, OutputT]):
    """å…¨Agentã®åŸºåº•ã‚¯ãƒ©ã‚¹"""
    
    # å¿…é ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
    name: str                    # Agentè­˜åˆ¥å
    max_tokens: int              # å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™
    temperature: float           # LLMæ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    timeout_seconds: int = 30    # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
    
    @abstractmethod
    def run(self, input: InputT, context: DecisionContext) -> OutputT:
        """
        å®Ÿè¡Œãƒ¡ã‚½ãƒƒãƒ‰
        - å…¥åŠ›ã¯æ˜ç¤ºçš„ã«å‹å®šç¾©
        - å‡ºåŠ›ã¯å¿…ãšæ§‹é€ åŒ–
        - æš—é»™ã®çŠ¶æ…‹å…±æœ‰ç¦æ­¢
        """
        pass
    
    @abstractmethod
    def validate_output(self, output: OutputT) -> bool:
        """å‡ºåŠ›ã®è‡ªå·±æ¤œè¨¼"""
        pass
```

### 3.2 å„Agentä»•æ§˜

#### ã€GatekeeperAgentã€‘å…¥å£æ¤œè¨¼Agentï¼ˆæœ€å„ªå…ˆå®Ÿè¡Œï¼‰
```python
"""
=================================================================
å…¥å£æ¤œè¨¼Agent - ä¸é©æ ¼ãªå•é¡Œã‚’é–€å‰æ‰•ã„
=================================================================
ã“ã®Agentã¯DaoAgentã®å‰ã«å¿…ãšå®Ÿè¡Œã•ã‚Œã€å•é¡Œã®é©æ ¼æ€§ã‚’åˆ¤æ–­ã™ã‚‹ã€‚
ä¸é©æ ¼ãªå•é¡Œã¯å³åº§ã«æ‹’å¦ã—ã€å¾Œç¶šAgentã«ã¯æ¸¡ã•ãªã„ã€‚
"""

class QuestionCategory(str, Enum):
    """å•é¡Œã‚«ãƒ†ã‚´ãƒªåˆ†é¡"""
    
    # âœ… å—ç†å¯èƒ½ï¼ˆæ±ºç­–ç³»ï¼‰
    STRATEGIC_DECISION = "strategic_decision"      # æˆ¦ç•¥çš„æ„æ€æ±ºå®š
    RESOURCE_ALLOCATION = "resource_allocation"    # ãƒªã‚½ãƒ¼ã‚¹é…åˆ†
    TRADE_OFF_CHOICE = "trade_off_choice"          # ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•é¸æŠ
    TIMING_JUDGMENT = "timing_judgment"            # ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¤æ–­
    RISK_EVALUATION = "risk_evaluation"            # ãƒªã‚¹ã‚¯è©•ä¾¡
    PRIORITY_SETTING = "priority_setting"          # å„ªå…ˆé †ä½è¨­å®š
    GO_NOGO_DECISION = "go_nogo_decision"          # Go/No-Goåˆ¤æ–­
    
    # âŒ æ‹’å¦ï¼ˆéæ±ºç­–ç³»ï¼‰
    GENERAL_KNOWLEDGE = "general_knowledge"        # ä¸€èˆ¬çŸ¥è­˜è³ªå•
    TECHNICAL_HOWTO = "technical_howto"            # æŠ€è¡“çš„How-to
    SYSTEM_INQUIRY = "system_inquiry"              # ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ã¸ã®è³ªå•
    CASUAL_CHAT = "casual_chat"                    # é›‘è«‡
    FACTUAL_LOOKUP = "factual_lookup"              # äº‹å®Ÿç¢ºèª
    OPINION_REQUEST = "opinion_request"            # æ„è¦‹ãƒ»æ„Ÿæƒ³æ±‚ã‚
    CREATIVE_REQUEST = "creative_request"          # å‰µä½œä¾é ¼

class GatekeeperInput(BaseModel):
    raw_question: str
    
class GatekeeperOutput(BaseModel):
    is_acceptable: bool                    # å—ç†å¯å¦
    category: QuestionCategory             # åˆ†é¡çµæœ
    confidence: float                      # åˆ¤å®šç¢ºä¿¡åº¦ (0.0-1.0)
    rejection_reason: str | None           # æ‹’å¦ç†ç”±ï¼ˆæ‹’å¦æ™‚ã®ã¿ï¼‰
    rejection_message: str | None          # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    suggested_rephrase: str | None         # è¨€ã„æ›ãˆææ¡ˆï¼ˆå¢ƒç•Œã‚±ãƒ¼ã‚¹ï¼‰
    
class GatekeeperAgent(BaseAgent[GatekeeperInput, GatekeeperOutput]):
    name = "GatekeeperAgent"
    max_tokens = 300
    temperature = 0.1  # æ¥µã‚ã¦ä½ã„ï¼ä¸€è²«ã—ãŸåˆ¤å®š
    
    # ========================================
    # å—ç†æ¡ä»¶ï¼ˆã“ã‚Œã‚‰ã‚’å…¨ã¦æº€ãŸã™å¿…è¦ï¼‰
    # ========================================
    ACCEPTANCE_CRITERIA = [
        "æ„æ€æ±ºå®šãƒ»åˆ¤æ–­ã‚’æ±‚ã‚ã¦ã„ã‚‹",
        "è¤‡æ•°ã®é¸æŠè‚¢ã‚„æ–¹å‘æ€§ãŒå­˜åœ¨ã™ã‚‹",
        "ãƒ“ã‚¸ãƒã‚¹ãƒ»çµ„ç¹”ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢é€£ã™ã‚‹",
        "å›ç­”è€…ï¼ˆæ±ºç­–è€…ï¼‰ãŒè¡Œå‹•ã‚’èµ·ã“ã›ã‚‹",
        "æ­£è§£ãŒä¸€æ„ã«å®šã¾ã‚‰ãªã„ï¼ˆåˆ¤æ–­ãŒå¿…è¦ï¼‰",
    ]
    
    # ========================================
    # å³åº§ã«æ‹’å¦ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ­£è¦è¡¨ç¾ï¼‰
    # ========================================
    INSTANT_REJECT_PATTERNS = [
        # å¤©æ°—ãƒ»æ™‚åˆ»
        r"(å¤©æ°—|æ°—æ¸©|weather|ä½•æ™‚|today)",
        # ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ã¸ã®è³ªå•
        r"(ã“ã®ã‚·ã‚¹ãƒ†ãƒ |ã“ã®AI|ã©ã†ã‚„ã£ã¦ä½œ|ä»•çµ„ã¿|how.*work|how.*built)",
        # ä¸€èˆ¬çŸ¥è­˜
        r"(ã¨ã¯ä½•|what is|æ„å‘³|å®šç¾©|explain what)",
        # è¨ˆç®—ãƒ»å¤‰æ›
        r"(è¨ˆç®—ã—ã¦|convert|æ›ç®—|translate)",
        # é›‘è«‡
        r"(ã“ã‚“ã«ã¡ã¯|hello|hi|å…ƒæ°—|èª¿å­|ã‚ã‚ŠãŒã¨ã†|thank)",
        # ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        r"(ã‚³ãƒ¼ãƒ‰.*æ›¸ã„ã¦|write.*code|ãƒ—ãƒ­ã‚°ãƒ©ãƒ .*ä½œæˆ)",
        # å‰µä½œ
        r"(ç‰©èª|story|poem|è©©|å°èª¬|ä½œæ–‡)",
        # äº‹å®Ÿç¢ºèª
        r"(èª°ãŒ|ã„ã¤|ã©ã“ã§|who is|when did|where is).*\?$",
    ]
    
    # ========================================
    # æ‹’å¦æ™‚ã®å®šå‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    # ========================================
    REJECTION_MESSAGES = {
        QuestionCategory.GENERAL_KNOWLEDGE: {
            "reason": "ä¸€èˆ¬çš„ãªçŸ¥è­˜ãƒ»æƒ…å ±ã®è³ªå•ã§ã™",
            "message": "ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ä¼æ¥­ã®æ„æ€æ±ºå®šæ”¯æ´ã«ç‰¹åŒ–ã—ã¦ã„ã¾ã™ã€‚ä¸€èˆ¬çš„ãªè³ªå•ã«ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚",
            "suggest": "æ„æ€æ±ºå®šãŒå¿…è¦ãªå½¢ã«è¨€ã„æ›ãˆã¦ãã ã•ã„ã€‚ä¾‹ï¼šã€Œâ—‹â—‹ã‚’å°å…¥ã™ã¹ãã‹åˆ¤æ–­ã—ãŸã„ã€"
        },
        QuestionCategory.TECHNICAL_HOWTO: {
            "reason": "æŠ€è¡“çš„ãªHow-toè³ªå•ã§ã™",
            "message": "æŠ€è¡“çš„ãªå®Ÿè£…æ–¹æ³•ã®è³ªå•ã«ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚",
            "suggest": "æŠ€è¡“é¸å®šã®æ„æ€æ±ºå®šã¨ã—ã¦è¨€ã„æ›ãˆã¦ãã ã•ã„ã€‚ä¾‹ï¼šã€ŒAã¨Bã®ã©ã¡ã‚‰ã®æŠ€è¡“ã‚’æ¡ç”¨ã™ã¹ãã‹ã€"
        },
        QuestionCategory.SYSTEM_INQUIRY: {
            "reason": "ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ã«é–¢ã™ã‚‹è³ªå•ã§ã™",
            "message": "ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã®ä»•çµ„ã¿ã‚„å®Ÿè£…ã«ã¤ã„ã¦ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚",
            "suggest": None
        },
        QuestionCategory.CASUAL_CHAT: {
            "reason": "é›‘è«‡ãƒ»æŒ¨æ‹¶ã§ã™",
            "message": "ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯é›‘è«‡ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚æ„æ€æ±ºå®šãŒå¿…è¦ãªå•é¡Œã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
            "suggest": None
        },
        QuestionCategory.FACTUAL_LOOKUP: {
            "reason": "äº‹å®Ÿç¢ºèªã®è³ªå•ã§ã™",
            "message": "äº‹å®Ÿã‚„æƒ…å ±ã®æ¤œç´¢ã«ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚",
            "suggest": "ãã®äº‹å®Ÿã‚’è¸ã¾ãˆãŸæ„æ€æ±ºå®šã¨ã—ã¦è¨€ã„æ›ãˆã¦ãã ã•ã„ã€‚"
        },
        QuestionCategory.OPINION_REQUEST: {
            "reason": "æ„è¦‹ãƒ»æ„Ÿæƒ³ã‚’æ±‚ã‚ã‚‹è³ªå•ã§ã™",
            "message": "å€‹äººçš„ãªæ„è¦‹ã‚„æ„Ÿæƒ³ã®æä¾›ã¯è¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚",
            "suggest": "å®¢è¦³çš„ãªåˆ¤æ–­åŸºæº–ã«åŸºã¥ãæ„æ€æ±ºå®šã¨ã—ã¦è¨€ã„æ›ãˆã¦ãã ã•ã„ã€‚"
        },
        QuestionCategory.CREATIVE_REQUEST: {
            "reason": "å‰µä½œãƒ»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã®ä¾é ¼ã§ã™",
            "message": "æ–‡ç« ã‚„å‰µä½œç‰©ã®ç”Ÿæˆã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚",
            "suggest": None
        },
    }
    
    # ========================================
    # å¢ƒç•Œã‚±ãƒ¼ã‚¹ã®åˆ¤å®šã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
    # ========================================
    BOUNDARY_GUIDELINES = """
    ã€å¢ƒç•Œã‚±ãƒ¼ã‚¹ã®åˆ¤å®šåŸºæº–ã€‘
    
    â—† å—ç†ã™ã‚‹ï¼š
    - ã€ŒAã¨Bã©ã¡ã‚‰ã‚’é¸ã¶ã¹ãã‹ã€â†’ ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•é¸æŠ
    - ã€Œã„ã¤â—‹â—‹ã™ã¹ãã‹ã€â†’ ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¤æ–­
    - ã€Œâ—‹â—‹ã«æŠ•è³‡ã™ã¹ãã‹ã€â†’ ãƒªã‚½ãƒ¼ã‚¹é…åˆ†
    - ã€Œâ—‹â—‹ã‚’ç¶šã‘ã‚‹ã¹ãã‹ä¸­æ­¢ã™ã¹ãã‹ã€â†’ Go/No-Go
    
    â—† æ‹’å¦ã™ã‚‹ï¼š
    - ã€Œâ—‹â—‹ã¨ã¯ä½•ã§ã™ã‹ã€â†’ å®šç¾©è³ªå•
    - ã€Œâ—‹â—‹ã®æ–¹æ³•ã‚’æ•™ãˆã¦ã€â†’ How-to
    - ã€Œâ—‹â—‹ã«ã¤ã„ã¦ã©ã†æ€ã„ã¾ã™ã‹ã€â†’ æ„è¦‹è¦æ±‚
    - ã€Œâ—‹â—‹ã‚’ä½œã£ã¦ã€â†’ ç”Ÿæˆä¾é ¼
    
    â—† ç¢ºèªãŒå¿…è¦ï¼ˆconfidence < 0.7ï¼‰ï¼š
    - ã€Œâ—‹â—‹ã«ã¤ã„ã¦ã€ã§çµ‚ã‚ã‚‹æ›–æ˜§ãªè³ªå•
    - ä¸»èªã‚„ç›®çš„ãŒä¸æ˜ç¢ºãªè³ªå•
    â†’ suggested_rephraseã‚’æä¾›
    """
```

#### ã€DaoAgentã€‘æœ¬è³ªåˆ¤å®šAgent
```python
class DaoInput(BaseModel):
    question: str                           # åŸå§‹è³ªå•ï¼ˆGatekeeperé€šéæ¸ˆã¿ï¼‰
    constraints: list[str]                  # ç¾å®Ÿåˆ¶ç´„
    stakeholders: list[str]                 # é–¢ä¿‚è€…
    gatekeeper_result: GatekeeperOutput     # å…¥å£æ¤œè¨¼çµæœï¼ˆå‚ç…§ç”¨ï¼‰
    
class DaoOutput(BaseModel):
    problem_type: Literal[
        "RESOURCE_ALLOCATION",    # ãƒªã‚½ãƒ¼ã‚¹é…åˆ†å•é¡Œ
        "TIMING_DECISION",        # ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¤æ–­
        "TRADE_OFF",              # ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•é¸æŠ
        "RISK_ASSESSMENT",        # ãƒªã‚¹ã‚¯è©•ä¾¡
        "STRATEGY_DIRECTION"      # æˆ¦ç•¥æ–¹å‘æ€§
    ]
    essence: str                  # ä¸€æ–‡ã§ã®æœ¬è³ªï¼ˆ50å­—ä»¥å†…ï¼‰
    immutable_constraints: list[str]  # ä¸å¯å¤‰åˆ¶ç´„ï¼ˆmax 5ï¼‰
    hidden_assumptions: list[str]     # éš ã‚ŒãŸå‰æï¼ˆmax 3ï¼‰
    
class DaoAgent(BaseAgent[DaoInput, DaoOutput]):
    name = "DaoAgent"
    max_tokens = 500
    temperature = 0.3  # ä½ã‚ï¼å®‰å®šåˆ¤æ–­
    
    # ç¦æ­¢äº‹é …
    FORBIDDEN = [
        "è§£æ±ºç­–ã®æç¤º",
        "è¡Œå‹•ã®æ¨å¥¨",
        "æ¥½è¦³çš„äºˆæ¸¬",
    ]
```

#### ã€FaAgentã€‘æˆ¦ç•¥é¸å®šAgent
```python
class FaInput(BaseModel):
    dao_result: DaoOutput
    available_resources: dict     # åˆ©ç”¨å¯èƒ½ãƒªã‚½ãƒ¼ã‚¹
    time_horizon: str             # æ™‚é–“è»¸
    
class PathOption(BaseModel):
    path_id: str
    name: str                     # ãƒ‘ã‚¹åï¼ˆ10å­—ä»¥å†…ï¼‰
    description: str              # èª¬æ˜ï¼ˆ100å­—ä»¥å†…ï¼‰
    pros: list[str]               # ãƒ¡ãƒªãƒƒãƒˆï¼ˆmax 3ï¼‰
    cons: list[str]               # ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼ˆmax 3ï¼‰
    success_probability: float    # æˆåŠŸç¢ºç‡ï¼ˆ0.0-1.0ï¼‰
    
class FaOutput(BaseModel):
    recommended_paths: list[PathOption]  # 1-2å€‹ã®ã¿
    rejected_paths: list[PathOption]     # æ˜ç¤ºçš„ã«ä¸æ¨å¥¨
    decision_criteria: list[str]         # åˆ¤æ–­åŸºæº–
    
class FaAgent(BaseAgent[FaInput, FaOutput]):
    name = "FaAgent"
    max_tokens = 800
    temperature = 0.4
    
    # åˆ¶ç´„
    MAX_RECOMMENDED_PATHS = 2
    MUST_INCLUDE_REJECTED = True  # ä¸æ¨å¥¨ã¯å¿…é ˆ
```

#### ã€ShuAgentã€‘å®Ÿè¡Œè¨ˆç”»Agent
```python
class ShuInput(BaseModel):
    fa_result: FaOutput
    selected_path_id: str         # é¸æŠã•ã‚ŒãŸãƒ‘ã‚¹
    
class ActionPhase(BaseModel):
    phase_number: int
    name: str
    duration: str                 # "2é€±é–“", "1ãƒ¶æœˆ" ãªã©
    actions: list[str]            # å…·ä½“çš„è¡Œå‹•ï¼ˆmax 5ï¼‰
    deliverables: list[str]       # æˆæœç‰©
    success_criteria: list[str]   # å®Œäº†æ¡ä»¶
    
class ShuOutput(BaseModel):
    phases: list[ActionPhase]     # 3-5ãƒ•ã‚§ãƒ¼ã‚º
    first_action: str             # ã€Œæœ€åˆã®ä¸€æ­©ã€ï¼ˆæ˜æ—¥ã§ãã‚‹ã“ã¨ï¼‰
    dependencies: list[str]       # å‰ææ¡ä»¶
    
class ShuAgent(BaseAgent[ShuInput, ShuOutput]):
    name = "ShuAgent"
    max_tokens = 1000
    temperature = 0.5
    
    # RAGä½¿ç”¨è¨±å¯
    USE_RAG = True
    RAG_SOURCES = ["industry_practices", "case_studies"]
```

#### ã€QiAgentã€‘æŠ€è¡“å®Ÿè£…Agent
```python
class QiInput(BaseModel):
    shu_result: ShuOutput
    tech_constraints: list[str]   # æŠ€è¡“åˆ¶ç´„
    
class Implementation(BaseModel):
    component: str
    technology: str
    estimated_effort: str
    risks: list[str]
    
class QiOutput(BaseModel):
    implementations: list[Implementation]
    tool_recommendations: list[str]
    integration_points: list[str]
    technical_debt_warnings: list[str]
    
class QiAgent(BaseAgent[QiInput, QiOutput]):
    name = "QiAgent"
    max_tokens = 1200
    temperature = 0.6
    
    # ç¦æ­¢
    FORBIDDEN = [
        "æŠ½è±¡çš„ææ¡ˆ",
        "å‡ç»´æ€è€ƒ",      # å•é¡Œã‚’å¤§ããã—ãªã„
        "ã‚¹ã‚³ãƒ¼ãƒ—æ‹¡å¤§",
    ]
    
    # RAGä½¿ç”¨è¨±å¯
    USE_RAG = True
    RAG_SOURCES = ["technical_docs", "compliance"]
```

#### ã€ReviewAgentã€‘æ¤œè¨¼Agentï¼ˆæœ€é‡è¦ï¼‰
```python
class ReviewInput(BaseModel):
    dao_result: DaoOutput
    fa_result: FaOutput
    shu_result: ShuOutput
    qi_result: QiOutput
    
class ReviewFinding(BaseModel):
    severity: Literal["CRITICAL", "WARNING", "INFO"]
    category: Literal[
        "LOGIC_FLAW",           # è«–ç†çš„æ¬ é™¥
        "OVER_OPTIMISM",        # éåº¦ãªæ¥½è¦³
        "RESPONSIBILITY_GAP",   # è²¬ä»»ã®ç©ºç™½
        "RESOURCE_MISMATCH",    # ãƒªã‚½ãƒ¼ã‚¹ä¸æ•´åˆ
        "TIMELINE_UNREALISTIC"  # éç¾å®Ÿçš„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    ]
    description: str
    affected_agent: str
    suggested_revision: str
    
class ReviewOutput(BaseModel):
    overall_verdict: Literal["PASS", "REVISE", "REJECT"]
    findings: list[ReviewFinding]
    confidence_score: float       # 0.0-1.0
    final_warnings: list[str]     # æœ€çµ‚è­¦å‘Š
    
class ReviewAgent(BaseAgent[ReviewInput, ReviewOutput]):
    name = "ReviewAgent"
    max_tokens = 1500
    temperature = 0.7  # ã‚„ã‚„é«˜ã‚ï¼å¤šè§’çš„è¦–ç‚¹
    
    # å¿…é ˆãƒã‚§ãƒƒã‚¯é …ç›®
    MANDATORY_CHECKS = [
        "è²¬ä»»è€…ãŒæ˜ç¢ºã‹",
        "æœ€æ‚ªã‚±ãƒ¼ã‚¹ã®æƒ³å®šãŒã‚ã‚‹ã‹",
        "æ’¤é€€æ¡ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹",
        "æœ€åˆã®ä¸€æ­©ãŒæ˜æ—¥å®Ÿè¡Œå¯èƒ½ã‹",
    ]
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆSchemaï¼‰

### 4.1 å…¥åŠ›Schema
```python
class DecisionRequest(BaseModel):
    """ã‚·ã‚¹ãƒ†ãƒ å…¥åŠ›ã®æœ€ä¸Šä½Schema"""
    
    # å¿…é ˆ
    question: str = Field(
        ...,
        min_length=10,
        max_length=2000,
        description="è§£æ±ºã—ãŸã„å•é¡Œãƒ»æ„æ€æ±ºå®šäº‹é …"
    )
    
    # åˆ¶ç´„æƒ…å ±
    constraints: ConstraintSet
    
    # ãƒ¡ã‚¿æƒ…å ±
    requester: RequesterInfo
    
    # ã‚ªãƒ—ã‚·ãƒ§ãƒ³
    additional_context: str | None = None
    attachments: list[str] | None = None  # S3 URLs

class ConstraintSet(BaseModel):
    budget: BudgetConstraint | None
    timeline: TimelineConstraint | None
    human_resources: list[str] = []
    technical: list[str] = []
    regulatory: list[str] = []
    
class RequesterInfo(BaseModel):
    role: Literal["FOUNDER", "CEO", "EXECUTIVE", "MANAGER"]
    decision_authority: bool  # æœ€çµ‚æ±ºå®šæ¨©ãŒã‚ã‚‹ã‹
    organization_size: Literal["STARTUP", "SMB", "ENTERPRISE"]
```

### 4.2 å‡ºåŠ›Schema
```python
class DecisionReport(BaseModel):
    """æœ€çµ‚å‡ºåŠ›ãƒ¬ãƒãƒ¼ãƒˆ"""
    
    # ãƒ¡ã‚¿æƒ…å ±
    report_id: str
    created_at: datetime
    version: str = "1.0"
    
    # å„å±¤ã®çµæœ
    dao: DaoOutput
    fa: FaOutput
    shu: ShuOutput
    qi: QiOutput
    review: ReviewOutput
    
    # ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
    executive_summary: ExecutiveSummary
    
    # ç½²åæ¬„
    signature_required: bool = True
    
class ExecutiveSummary(BaseModel):
    one_line_decision: str        # ä¸€æ–‡çµè«–ï¼ˆ30å­—ä»¥å†…ï¼‰
    recommended_action: str       # æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    key_risks: list[str]          # ä¸»è¦ãƒªã‚¹ã‚¯ï¼ˆmax 3ï¼‰
    first_step: str               # æœ€åˆã®ä¸€æ­©
    estimated_impact: str         # æœŸå¾…åŠ¹æœ
```

---

## 5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆ

### 5.1 ãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
```
ãƒ†ãƒ¼ãƒ: "Executive Decision Console"
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åŸºèª¿ï¼ˆé›†ä¸­åŠ›å‘ä¸Šï¼‰
- ãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆï¼ˆæƒ…å ±éå¤šã‚’é¿ã‘ã‚‹ï¼‰
- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹å¯è¦–åŒ–ï¼ˆå®‰å¿ƒæ„Ÿï¼‰
- ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«æ„Ÿï¼ˆä¿¡é ¼æ€§ï¼‰
```

### 5.2 ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```css
:root {
  /* Primary */
  --bg-primary: #0a0a0f;          /* æ·±ã„é»’ */
  --bg-secondary: #12121a;        /* ã‚«ãƒ¼ãƒ‰èƒŒæ™¯ */
  --bg-elevated: #1a1a24;         /* æµ®ãä¸ŠãŒã‚Š */
  
  /* Accent */
  --accent-primary: #6366f1;      /* ã‚¤ãƒ³ãƒ‡ã‚£ã‚´ */
  --accent-secondary: #818cf8;    
  --accent-glow: rgba(99, 102, 241, 0.2);
  
  /* Semantic */
  --success: #10b981;             /* ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ */
  --warning: #f59e0b;             /* ã‚¢ãƒ³ãƒãƒ¼ */
  --danger: #ef4444;              /* ãƒ¬ãƒƒãƒ‰ */
  --info: #3b82f6;                /* ãƒ–ãƒ«ãƒ¼ */
  
  /* Text */
  --text-primary: #f8fafc;
  --text-secondary: #94a3b8;
  --text-muted: #475569;
  
  /* Border */
  --border-subtle: rgba(255,255,255,0.06);
  --border-accent: rgba(99, 102, 241, 0.3);
}
```

### 5.3 ç”»é¢æ§‹æˆ

#### ç”»é¢1: å…¥åŠ›ç”»é¢ï¼ˆDecision Inputï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  Decision Agent Platform              [User] [Settings] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   ã‚ãªãŸã®æ„æ€æ±ºå®šèª²é¡Œã‚’å…¥åŠ›ã—ã¦ãã ã•ã„                 â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚                                                 â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  [ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ - å•é¡Œãƒ»èª²é¡Œã®è¨˜è¿°]            â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                                                 â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  placeholder: ä¾‹ï¼‰æ–°è¦äº‹æ¥­ã®æ–¹å‘æ€§ã«ã¤ã„ã¦ã€     â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  Aæ¡ˆã¨Bæ¡ˆã®ã©ã¡ã‚‰ã‚’é¸ã¶ã¹ãã‹æ±ºæ–­ã§ããªã„...     â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                                                 â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   åˆ¶ç´„æ¡ä»¶ï¼ˆä»»æ„ï¼‰                                       â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚   â”‚   â”‚ğŸ’° äºˆç®—   â”‚ â”‚â±ï¸ æœŸé™   â”‚ â”‚ğŸ‘¥ äººå“¡   â”‚             â”‚  â”‚
â”‚   â”‚   â”‚ Â¥___M   â”‚ â”‚ ___ãƒ¶æœˆ  â”‚ â”‚ ___å    â”‚             â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚  â”‚
â”‚   â”‚   â”‚ğŸ”§ æŠ€è¡“   â”‚ â”‚ğŸ“‹ è¦åˆ¶   â”‚  [+ åˆ¶ç´„ã‚’è¿½åŠ ]          â”‚  â”‚
â”‚   â”‚   â”‚ ã‚¿ã‚°å…¥åŠ› â”‚ â”‚ ã‚¿ã‚°å…¥åŠ› â”‚                           â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚   â”‚           â”‚   â–¶ æ±ºç­–åˆ†æã‚’é–‹å§‹ã™ã‚‹       â”‚              â”‚  â”‚
â”‚   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç”»é¢2: å‡¦ç†ä¸­ç”»é¢ï¼ˆProcessing Viewï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  Decision Agent Platform              [User] [Settings] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   åˆ†æé€²è¡Œä¸­...                                                 â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   é“ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] âœ“ å®Œäº†                      â”‚  â”‚
â”‚   â”‚   â”œâ”€ å•é¡Œã‚¿ã‚¤ãƒ—: TRADE_OFF                              â”‚  â”‚
â”‚   â”‚   â””â”€ æœ¬è³ª: çŸ­æœŸåç›Šã¨é•·æœŸæˆé•·ã®ãƒãƒ©ãƒ³ã‚¹åˆ¤æ–­             â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   æ³• [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] âŸ³ å‡¦ç†ä¸­...                 â”‚  â”‚
â”‚   â”‚   â””â”€ æˆ¦ç•¥ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è©•ä¾¡ä¸­                             â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   è¡“ [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] â—‹ å¾…æ©Ÿä¸­                    â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   å™¨ [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] â—‹ å¾…æ©Ÿä¸­                    â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚  â”‚
â”‚   â”‚   æ¤œè¨¼ [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] â—‹ æœ€çµ‚æ¤œè¨¼å¾…ã¡            â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   ğŸ’¡ ãƒ’ãƒ³ãƒˆ: å„æ®µéšã§æ·±å±¤åˆ†æã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚                  â”‚
â”‚      é€šå¸¸2-3åˆ†ã§å®Œäº†ã—ã¾ã™ã€‚                                   â”‚
â”‚                                                                 â”‚
â”‚   [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                                                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç”»é¢3: çµæœç”»é¢ï¼ˆDecision Reportï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  Decision Agent Platform              [User] [Settings] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ EXECUTIVE SUMMARY                              ä¿¡é ¼åº¦: 87% â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ’¡ çµè«–                                                â”‚â”‚ â”‚
â”‚  â”‚ â”‚ Bæ¡ˆã‚’é¸æŠã—ã€6ãƒ¶æœˆä»¥å†…ã«MVPæ¤œè¨¼ã‚’å®Ÿæ–½ã™ã¹ã           â”‚â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ ğŸ¯ æœ€åˆã®ä¸€æ­©ï¼ˆæ˜æ—¥å®Ÿè¡Œå¯èƒ½ï¼‰                             â”‚ â”‚
â”‚  â”‚ â†’ ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã¨ã®30åˆ†MTGã‚’è¨­å®šã™ã‚‹                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ âš ï¸ ä¸»è¦ãƒªã‚¹ã‚¯                                             â”‚ â”‚
â”‚  â”‚ â€¢ æ—¢å­˜é¡§å®¢ã®é›¢åãƒªã‚¹ã‚¯                                    â”‚ â”‚
â”‚  â”‚ â€¢ é–‹ç™ºãƒªã‚½ãƒ¼ã‚¹ã®ç«¶åˆ                                      â”‚ â”‚
â”‚  â”‚ â€¢ å¸‚å ´ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ä¸ç¢ºå®Ÿæ€§                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   é“    â”‚   æ³•    â”‚   è¡“    â”‚   å™¨    â”‚  â† ã‚¿ãƒ–åˆ‡æ›¿       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  [é¸æŠä¸­ã‚¿ãƒ–ã®è©³ç´°å†…å®¹ãŒã“ã“ã«è¡¨ç¤º]                       â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±                                       â”‚ â”‚
â”‚  â”‚  â€¢ è¦–è¦šçš„ãªã‚«ãƒ¼ãƒ‰/ãƒªã‚¹ãƒˆ                                  â”‚ â”‚
â”‚  â”‚  â€¢ å±•é–‹å¯èƒ½ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³                                   â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“„ PDFå‡ºåŠ›      â”‚  â”‚ ğŸ“‹ Notioné€£æº   â”‚  â”‚ ğŸ”„ å†åˆ†æ     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜

#### ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```tsx
interface DecisionCardProps {
  type: 'dao' | 'fa' | 'shu' | 'qi' | 'review';
  status: 'pending' | 'processing' | 'completed' | 'error';
  title: string;
  summary?: string;
  expandable: boolean;
  children?: React.ReactNode;
}

// å„ã‚¿ã‚¤ãƒ—ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ã‚«ãƒ©ãƒ¼
const typeConfig = {
  dao: { icon: 'ğŸ¯', color: 'indigo', label: 'æœ¬è³ª' },
  fa:  { icon: 'ğŸ›¤ï¸', color: 'violet', label: 'æˆ¦ç•¥' },
  shu: { icon: 'ğŸ“‹', color: 'blue', label: 'è¨ˆç”»' },
  qi:  { icon: 'ğŸ”§', color: 'emerald', label: 'å®Ÿè£…' },
  review: { icon: 'ğŸ”', color: 'amber', label: 'æ¤œè¨¼' },
};
```

#### ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
```tsx
interface AgentProgressProps {
  agents: {
    name: string;
    status: 'waiting' | 'running' | 'completed' | 'failed';
    progress: number;  // 0-100
    message?: string;
  }[];
}
```

---

## 6. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆç¢ºå®šï¼‰

### 6.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```yaml
è¨€èª: Python 3.12+
ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: FastAPI
ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³: Pydantic v2
éåŒæœŸ: asyncio + anyio
çŠ¶æ…‹æ©Ÿæ¢°: transitions / è‡ªä½œFSM
LLMçµ±åˆ: litellm (æŠ½è±¡åŒ–å±¤)
RAG: LlamaIndex (Shu/Qiå°‚ç”¨)
DB: PostgreSQL 16 + pgvector
ã‚­ãƒ£ãƒƒã‚·ãƒ¥: Redis 7
ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼: Celery / ARQ
```

### 6.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```yaml
ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: Next.js 14 (App Router)
è¨€èª: TypeScript 5.x
ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°: Tailwind CSS + shadcn/ui
çŠ¶æ…‹ç®¡ç†: Zustand
ãƒ‡ãƒ¼ã‚¿å–å¾—: TanStack Query
WebSocket: Socket.io-client
ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: Framer Motion
ãƒãƒ£ãƒ¼ãƒˆ: Recharts
PDFç”Ÿæˆ: @react-pdf/renderer
```

### 6.3 ã‚¤ãƒ³ãƒ•ãƒ©
```yaml
ã‚³ãƒ³ãƒ†ãƒŠ: Docker + Docker Compose
ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: Kubernetes (å°†æ¥)
CI/CD: GitHub Actions
ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°: Prometheus + Grafana
ãƒ­ã‚°: Loki / CloudWatch
```

---

## 7. é–‹ç™ºåˆ¶ç´„ãƒ»ãƒ«ãƒ¼ãƒ«ï¼ˆAIå®Ÿè£…æ™‚ã®æŒ‡é‡ï¼‰

### 7.1 çµ¶å¯¾ã«å®ˆã‚‹ã¹ããƒ«ãƒ¼ãƒ«
```markdown
1. ã€æ§‹é€ åŒ–å‡ºåŠ›ã®å³å®ˆã€‘
   - å…¨ã¦ã®Agentå‡ºåŠ›ã¯Pydanticãƒ¢ãƒ‡ãƒ«ã§å®šç¾©
   - è‡ªç”±æ–‡ãƒ†ã‚­ã‚¹ãƒˆã¯ç¦æ­¢
   - JSON Schemaæº–æ‹ 

2. ã€çŠ¶æ…‹é·ç§»ã®å³æ ¼åŒ–ã€‘
   - å®šç¾©ã•ã‚ŒãŸé·ç§»ä»¥å¤–ã¯å®Ÿè¡Œä¸å¯
   - ã‚¹ã‚­ãƒƒãƒ—ç¦æ­¢
   - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¿…é ˆ

3. ã€è²¬ä»»ã®æ˜ç¢ºåŒ–ã€‘
   - å„Agentã¯å˜ä¸€è²¬ä»»
   - å…¥å‡ºåŠ›ã¯æ˜ç¤ºçš„ã«å‹å®šç¾©
   - æš—é»™ã®çŠ¶æ…‹å…±æœ‰ç¦æ­¢

4. ã€RAGã®åˆ¶é™ã€‘
   - Dao/Faã§ã¯ä½¿ç”¨ç¦æ­¢
   - Shu/Qiã§ã®ã¿è¨±å¯
   - ã‚½ãƒ¼ã‚¹æ˜è¨˜å¿…é ˆ

5. ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€‘
   - å…¨ã¦ã®ã‚¨ãƒ©ãƒ¼ã¯æ§‹é€ åŒ–
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿ã‚’æ˜è¨˜
   - ãƒªã‚«ãƒãƒªãƒ¼æ–¹æ³•ã‚’æç¤º
```

### 7.2 ã‚³ãƒ¼ãƒ‰å“è³ªãƒ«ãƒ¼ãƒ«
```python
# âœ… Good: æ˜ç¤ºçš„ãªå‹ã€å˜ä¸€è²¬ä»»
class DaoAgent:
    def run(self, input: DaoInput, ctx: Context) -> DaoOutput:
        essence = self._extract_essence(input.question)
        constraints = self._identify_constraints(input)
        return DaoOutput(essence=essence, constraints=constraints)

# âŒ Bad: æš—é»™ã®ä¾å­˜ã€æ›–æ˜§ãªæˆ»ã‚Šå€¤
class BadAgent:
    def run(self, data):
        result = self.llm.chat(data)  # æš—é»™ã®LLMä¾å­˜
        return result  # å‹ä¸æ˜
```

### 7.3 ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆãƒ«ãƒ¼ãƒ«
```markdown
å„Agentã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã¯ä»¥ä¸‹ã‚’å¿…ãšå«ã‚ã‚‹:

1. ã€å½¹å‰²å®šç¾©ã€‘
   - ã‚ãªãŸã¯â—‹â—‹Agentã§ã™
   - å”¯ä¸€ã®è²¬ä»»ã¯â—‹â—‹ã§ã™

2. ã€å‡ºåŠ›å½¢å¼ã®å¼·åˆ¶ã€‘
   - å¿…ãšä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„
   - å½¢å¼å¤–ã®å‡ºåŠ›ã¯ç„¡åŠ¹ã§ã™

3. ã€ç¦æ­¢äº‹é …ã€‘
   - â—‹â—‹ã«ã¤ã„ã¦è¨€åŠã—ã¦ã¯ã„ã‘ã¾ã›ã‚“
   - â—‹â—‹ã®åˆ¤æ–­ã¯æ¬¡ã®Agentã«å§”ã­ã¦ãã ã•ã„

4. ã€ä¾‹ç¤ºã€‘
   - è‰¯ã„å‡ºåŠ›ä¾‹
   - æ‚ªã„å‡ºåŠ›ä¾‹
```

---

## 8. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: MVPï¼ˆ2é€±é–“ï¼‰
```
Week 1:
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ æ§‹ç¯‰
- [ ] DecisionContext schemaå®šç¾©
- [ ] 5 Agent ã®å…¥å‡ºåŠ›schemaå®šç¾©
- [ ] DaoAgentå®Ÿè£…ï¼ˆPrompt + Parserï¼‰

Week 2:
- [ ] Fa/Shu/Qi Agentå®Ÿè£…
- [ ] ReviewAgentå®Ÿè£…
- [ ] çŠ¶æ…‹æ©Ÿæ¢°å®Ÿè£…
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆ
```

### Phase 2: çµ±åˆï¼ˆ2é€±é–“ï¼‰
```
Week 3:
- [ ] API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- [ ] WebSocketé€²æ—é€šçŸ¥
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å…¥åŠ›ç”»é¢

Week 4:
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµæœç”»é¢
- [ ] PDFå‡ºåŠ›æ©Ÿèƒ½
- [ ] E2Eãƒ†ã‚¹ãƒˆ
```

### Phase 3: æ¤œè¨¼ï¼ˆ2é€±é–“ï¼‰
```
Week 5-6:
- [ ] å®Ÿå•é¡Œã§ã®æ¤œè¨¼ï¼ˆ3ã‚±ãƒ¼ã‚¹ä»¥ä¸Šï¼‰
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- [ ] ReviewAgentå¼·åŒ–
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
```

---

## ä»˜éŒ²A: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```
decision-agent-platform/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py              # FastAPI app
â”‚   â”‚   â”œâ”€â”€ config.py            # è¨­å®š
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ agents/              # Agentå®Ÿè£…
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py          # BaseAgent
â”‚   â”‚   â”‚   â”œâ”€â”€ dao.py
â”‚   â”‚   â”‚   â”œâ”€â”€ fa.py
â”‚   â”‚   â”‚   â”œâ”€â”€ shu.py
â”‚   â”‚   â”‚   â”œâ”€â”€ qi.py
â”‚   â”‚   â”‚   â””â”€â”€ review.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ schemas/             # Pydanticãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ input.py
â”‚   â”‚   â”‚   â”œâ”€â”€ output.py
â”‚   â”‚   â”‚   â””â”€â”€ internal.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ flow/                # çŠ¶æ…‹æ©Ÿæ¢°
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ state_machine.py
â”‚   â”‚   â”‚   â””â”€â”€ transitions.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ decision.py
â”‚   â”‚   â”‚   â”œâ”€â”€ llm_gateway.py
â”‚   â”‚   â”‚   â””â”€â”€ rag_service.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                 # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ decisions.py
â”‚   â”‚   â”‚   â””â”€â”€ websocket.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ prompts/             # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚       â”œâ”€â”€ dao.txt
â”‚   â”‚       â”œâ”€â”€ fa.txt
â”‚   â”‚       â”œâ”€â”€ shu.txt
â”‚   â”‚       â”œâ”€â”€ qi.txt
â”‚   â”‚       â””â”€â”€ review.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ pyproject.toml
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # å…¥åŠ›ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ processing/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     # å‡¦ç†ä¸­ç”»é¢
â”‚   â”‚   â”‚   â””â”€â”€ report/
â”‚   â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚   â”‚           â””â”€â”€ page.tsx # çµæœç”»é¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn/ui
â”‚   â”‚   â”‚   â”œâ”€â”€ decision-input/
â”‚   â”‚   â”‚   â”œâ”€â”€ agent-progress/
â”‚   â”‚   â”‚   â””â”€â”€ report-view/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â””â”€â”€ websocket.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ globals.css
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

---

## ä»˜éŒ²B: APIä»•æ§˜

### POST /api/decisions
```yaml
Request:
  Content-Type: application/json
  Body: DecisionRequest

Response:
  201 Created
  Body:
    decision_id: string
    status: "ACCEPTED"
    websocket_url: string
```

### GET /api/decisions/{id}
```yaml
Response:
  200 OK
  Body: DecisionReport
```

### WebSocket /ws/decisions/{id}
```yaml
Messages (Server â†’ Client):
  - type: "AGENT_START"
    agent: string
    
  - type: "AGENT_PROGRESS"
    agent: string
    progress: number
    message: string
    
  - type: "AGENT_COMPLETE"
    agent: string
    result: object
    
  - type: "DECISION_COMPLETE"
    report: DecisionReport
    
  - type: "ERROR"
    error: ErrorDetail
```
