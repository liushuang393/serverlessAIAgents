# AgentFlow å¿«é€Ÿå­¦ä¹ æŒ‡å—

> **ç›®æ ‡**: è®© AI å’Œäººç±»å¼€å‘è€…åœ¨ 30 åˆ†é’Ÿå†…ç†è§£ AgentFlow æ ¸å¿ƒæ¶æ„

---

## ğŸ“– ç›®å½•

1. [æ¡†æ¶å“²å­¦ (é“)](#1-æ¡†æ¶å“²å­¦-é“)
2. [æ¶æ„è®¾è®¡ (æ³•)](#2-æ¶æ„è®¾è®¡-æ³•)
3. [å¼€å‘æ–¹æ³• (æœ¯)](#3-å¼€å‘æ–¹æ³•-æœ¯)
4. [å·¥å…·é“¾ (å™¨)](#4-å·¥å…·é“¾-å™¨)
5. [é€ŸæŸ¥è¡¨](#5-é€ŸæŸ¥è¡¨)

---

## 1. æ¡†æ¶å“²å­¦ (é“)

### æ ¸å¿ƒç†å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AgentFlow è®¾è®¡å“²å­¦                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ¯ ç›®æ ‡ï¼šè®© AI åº”ç”¨å¼€å‘æ ‡å‡†åŒ–ã€ç®€å•åŒ–                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   App å…³æ³¨   â”‚     â”‚  æ¡†æ¶æä¾›    â”‚     â”‚   åè®®ç»Ÿä¸€   â”‚   â”‚
â”‚  â”‚  ä¸šåŠ¡é€»è¾‘    â”‚ â†â†’  â”‚  æŠ€æœ¯å®ç°    â”‚ â†â†’  â”‚  äº’è”äº’é€š    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  App å¼€å‘è€…åªéœ€è¦ï¼š                                              â”‚
â”‚  â€¢ å®šä¹‰ Agent èŒè´£ï¼ˆæç¤ºè¯ï¼‰                                     â”‚
â”‚  â€¢ å®šä¹‰å·¥ä½œæµç¨‹ï¼ˆè°å…ˆè°åï¼‰                                      â”‚
â”‚  â€¢ å®šä¹‰è¾“å…¥è¾“å‡ºï¼ˆSchemaï¼‰                                       â”‚
â”‚  â€¢ å®šä¹‰ UI å±•ç¤ºï¼ˆå¯é€‰ï¼‰                                         â”‚
â”‚                                                                 â”‚
â”‚  æ¡†æ¶è‡ªåŠ¨å¤„ç†ï¼š                                                  â”‚
â”‚  â€¢ LLM è°ƒç”¨ã€é‡è¯•ã€è´Ÿè½½å‡è¡¡                                      â”‚
â”‚  â€¢ SSE/WebSocket é€šä¿¡                                           â”‚
â”‚  â€¢ çŠ¶æ€ç®¡ç†ã€æŒä¹…åŒ–                                              â”‚
â”‚  â€¢ é”™è¯¯å¤„ç†ã€æ—¥å¿—ç›‘æ§                                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ºä»€ä¹ˆé€‰æ‹© AgentFlowï¼Ÿ

| ä¼ ç»Ÿæ–¹å¼                  | AgentFlow                       |
| ------------------------- | ------------------------------- |
| æ¯ä¸ªåº”ç”¨é‡å¤å®ç° LLM è°ƒç”¨ | ç»Ÿä¸€ Providerï¼Œä¸€è¡Œä»£ç åˆ‡æ¢æ¨¡å‹ |
| æ‰‹åŠ¨å¤„ç† SSE è¿æ¥         | `useAgentStream` Hook è‡ªåŠ¨ç®¡ç†  |
| å„è‡ªå®ç°é”™è¯¯å¤„ç†          | æ¡†æ¶ç»Ÿä¸€é”™è¯¯åˆ†ç±»ä¸é‡è¯•          |
| çŠ¶æ€ç®¡ç†ä»£ç åˆ†æ•£          | `createAgentStore` å·¥å‚ç»Ÿä¸€     |
| åè®®é€‚é…ç¹ç              | MCP/A2A/AG-UI/A2UI å››åè®®ç»Ÿä¸€   |

---

## 2. æ¶æ„è®¾è®¡ (æ³•)

### 8 å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AgentFlow 8å±‚æ¶æ„                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  L1 ğŸ“± åº”ç”¨å±‚      apps/ (decision_governance_engine, ...)      â”‚
â”‚                         â†‘ åªå†™ä¸šåŠ¡ä»£ç                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L2 ğŸ¨ UIå±‚        @agentflow/ui (Hooks, Components)            â”‚
â”‚                    agentflow/protocols/a2ui (æœåŠ¡ç«¯ç»„ä»¶)         â”‚
â”‚                         â†‘ ç»Ÿä¸€å‰ç«¯ SDK                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L3 ğŸ”„ æµç¨‹å±‚      @agent / Engines / AgentCoordinator      â”‚
â”‚                         â†‘ ä¸‰ç§å¼€å‘æ–¹å¼                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L4 ğŸ¤– Agentå±‚     AgentBlock / @agent è£…é¥°å™¨                   â”‚
â”‚                         â†‘ Agent åŸºç±»                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L5 ğŸ› ï¸ å·¥å…·å±‚     @tool / MCP Tools / Skills                   â”‚
â”‚                         â†‘ å·¥å…·æ³¨å†Œä¸è°ƒç”¨                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L6 ğŸ”Œ Providerå±‚  get_llm() / get_db() / get_vectordb()        â”‚
â”‚                         â†‘ æ¾è€¦åˆèµ„æºè®¿é—®                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L7 ğŸŒ åè®®å±‚      MCP / A2A / AG-UI / A2UI                     â”‚
â”‚                         â†‘ å››åè®®äº’è”äº’é€š                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  L8 ğŸ’¾ åŸºç¡€è®¾æ–½å±‚  OpenAI / Anthropic / Supabase / Redis        â”‚
â”‚                         â†‘ å¯æ›¿æ¢çš„å¤–éƒ¨æœåŠ¡                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
serverlessAIAgents/
â”œâ”€â”€ agentflow/              # æ¡†æ¶æ ¸å¿ƒ
â”‚   â”œâ”€â”€ core/               # å¼•æ“ã€æ³¨å†Œè¡¨ã€éªŒè¯å™¨
â”‚   â”œâ”€â”€ protocols/          # MCP/A2A/AG-UI/A2UI
â”‚   â”œâ”€â”€ providers/          # LLM/DB/Vector Provider
â”‚   â”œâ”€â”€ sdk/                # å‰åç«¯ SDK (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ frontend/       # @agentflow/ui
â”‚   â”‚   â””â”€â”€ api/            # agentflow.sdk.api
â”‚   â”œâ”€â”€ patterns/           # è®¾è®¡æ¨¡å¼
â”‚   â”œâ”€â”€ memory/             # è®°å¿†ç³»ç»Ÿ
â”‚   â””â”€â”€ skills/             # æŠ€èƒ½ç³»ç»Ÿ
â”‚
â”œâ”€â”€ apps/                   # åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ decision_governance_engine/
â”‚   â”œâ”€â”€ market_trend_monitor/
â”‚   â””â”€â”€ code_migration_assistant/
â”‚
â”œâ”€â”€ studio/                 # å¯è§†åŒ–ç¼–è¾‘å™¨
â””â”€â”€ docs/                   # æ–‡æ¡£
```

### æ ¸å¿ƒæ¦‚å¿µ

```mermaid
graph LR
    subgraph "æ•°æ®æµ"
        A[ç”¨æˆ·è¾“å…¥] --> B[Agent 1]
        B --> C[Agent 2]
        C --> D[Agent N]
        D --> E[ç»“æœè¾“å‡º]
    end

    subgraph "äº‹ä»¶æµ (AG-UI)"
        B -.-> F[flow.start]
        B -.-> G[node.start]
        C -.-> H[progress]
        D -.-> I[node.complete]
        E -.-> J[flow.complete]
    end

    subgraph "UI å“åº”"
        F --> K[æ˜¾ç¤ºè¿æ¥çŠ¶æ€]
        G --> L[æ˜¾ç¤ºå¤„ç†ä¸­]
        H --> M[æ›´æ–°è¿›åº¦æ¡]
        I --> N[æ˜¾ç¤ºç»“æœé¢„è§ˆ]
        J --> O[è·³è½¬ç»“æœé¡µ]
    end
```

---

## 3. å¼€å‘æ–¹æ³• (æœ¯)

### æ–¹å¼ 1: @agent è£…é¥°å™¨ï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„æ–¹å¼ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼š

```python
from agentflow import agent, tool

@agent
class AnalyzerAgent:
    """åˆ†æç”¨æˆ·è¾“å…¥å¹¶æå–å…³é”®ä¿¡æ¯."""

    system_prompt = """
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åˆ†æå¸ˆã€‚
    åˆ†æç”¨æˆ·çš„é—®é¢˜ï¼Œæå–å…³é”®ä¿¡æ¯ã€‚
    """

    @tool
    def search_database(self, query: str) -> list:
        """æœç´¢æ•°æ®åº“."""
        # å·¥å…·å®ç°
        return []

# ä½¿ç”¨
result = await AnalyzerAgent().invoke({"question": "..."})
```

### æ–¹å¼ 2: Engine Patternï¼ˆå¤š Agent åè°ƒãƒ»æ¨å¥¨ï¼‰

é€‚åˆå¤šä¸ª Agent åä½œçš„åœºæ™¯ï¼Œ4ç¨®é¡ã®äºˆå®šç¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰é¸æŠï¼š

```python
from agentflow.engines import PipelineEngine

# PipelineEngine ã‚’ä½¿ç”¨ï¼ˆè¤‡æ•°Agent + Reviewï¼‰
engine = PipelineEngine(
    stages=[
        {"name": "gate", "agent": GateAgent, "gate": True},
        {"name": "analysis", "agents": [AnalyzerAgent, PlannerAgent], "parallel": True},
        {"name": "review", "agent": ReviewerAgent, "review": True},
    ],
    max_revisions=2,
)

# åŒæ­¥æ‰§è¡Œ
result = await engine.run({"task": "..."})

# æµå¼æ‰§è¡Œï¼ˆè·å– AG-UI äº‹ä»¶ï¼‰
async for event in engine.run_stream({"task": "..."}):
    print(event)  # engine.start, stage.start, progress, ...
```

### æ–¹å¼ 3: YAML é…ç½®ï¼ˆå£°æ˜å¼ï¼‰

é€‚åˆå¤æ‚å·¥ä½œæµï¼š

```yaml
# agent.yaml
name: decision-flow
version: 1.0.0

agents:
  - id: gatekeeper
    type: GatekeeperAgent
    config:
      max_tokens: 1000

  - id: analyzer
    type: AnalyzerAgent
    depends_on: [gatekeeper]

  - id: reviewer
    type: ReviewerAgent
    depends_on: [analyzer]

workflow:
  entry: gatekeeper
  transitions:
    gatekeeper:
      success: analyzer
      reject: end
    analyzer:
      complete: reviewer
    reviewer:
      approve: end
      revise: analyzer
```

```python
from apps.decision_governance_engine import DecisionEngine

# PipelineEngine ã‚’ä½¿ç”¨
engine = DecisionEngine()
result = await engine.run({"question": "..."})
```

### å‰ç«¯å¼€å‘

ä½¿ç”¨ `@agentflow/ui` SDKï¼š

```tsx
import {
  useAgentStream,
  createAgentStore,
  AgentProgress,
  NotificationProvider,
} from "@agentflow/ui";

// 1. åˆ›å»º Storeï¼ˆåªå®šä¹‰ä¸šåŠ¡çŠ¶æ€ï¼‰
const useMyStore = createAgentStore({
  name: "my-app",
  initialState: {
    question: "",
    options: [],
  },
});

// 2. ä½¿ç”¨ SSE Hook
function ProcessingPage() {
  const { agents, isComplete, start } = useAgentStream({
    endpoint: "/api/my-app/stream",
    agents: [
      { id: "analyzer", name: "åˆ†æ", label: "æ•°æ®åˆ†æ" },
      { id: "planner", name: "è§„åˆ’", label: "åˆ¶å®šæ–¹æ¡ˆ" },
    ],
  });

  return (
    <div>
      <button onClick={() => start({ question: "..." })}>å¼€å§‹å¤„ç†</button>
      <AgentProgress agents={agents} />
    </div>
  );
}
```

### åç«¯ API

ä½¿ç”¨ `agentflow.sdk.api` SDKï¼š

```python
from fastapi import FastAPI
from agentflow.sdk.api import create_agent_router
from my_app.engine import MyEngine

app = FastAPI()

# è‡ªåŠ¨ç”Ÿæˆæ ‡å‡†ç«¯ç‚¹
router = create_agent_router(
    engine=MyEngine,
    prefix="/api/my-app",
)

app.include_router(router)

# è‡ªåŠ¨ç”Ÿæˆï¼š
# GET  /api/my-app/health
# GET  /api/my-app/agents
# POST /api/my-app/process
# GET  /api/my-app/stream (SSE)
```

---

## 4. å·¥å…·é“¾ (å™¨)

### CLI å‘½ä»¤

```bash
# åˆ›å»ºé¡¹ç›®
agentflow create my-agent --template decision

# è¿è¡Œé¡¹ç›®
agentflow run

# æµ‹è¯•
agentflow test

# æ‰“å¼€å¯è§†åŒ–ç¼–è¾‘å™¨
agentflow studio

# æ£€æŸ¥é…ç½®
agentflow validate

# éƒ¨ç½²
agentflow deploy
```

### Provider ä½¿ç”¨

```python
from agentflow import get_llm, get_db, get_vectordb, get_embedding

# LLMï¼ˆè‡ªåŠ¨æ£€æµ‹ OpenAI/Anthropic/Ollamaï¼‰
llm = get_llm()
response = await llm.chat([{"role": "user", "content": "hello"}])

# æ•°æ®åº“ï¼ˆè‡ªåŠ¨æ£€æµ‹ Supabase/PostgreSQL/SQLiteï¼‰
db = get_db()
users = await db.select("users", filters={"active": True})

# å‘é‡æ•°æ®åº“ï¼ˆè‡ªåŠ¨æ£€æµ‹ FAISS/Qdrant/Weaviate/Supabase/ChromaDBï¼‰
# ç¯å¢ƒå˜é‡: VECTOR_DATABASE_TYPE=qdrant
vdb = get_vectordb()
await vdb.connect()
results = await vdb.search(query="query text", query_embedding=[...], top_k=5)

# Embedding
emb = get_embedding()
vector = await emb.embed_text("Hello world")
```

### åè®®ä½¿ç”¨

```python
# MCP - å¤–éƒ¨å·¥å…·
from agentflow.protocols import MCPClient
mcp = MCPClient("mcp-server-url")
tools = await mcp.list_tools()

# A2A - Agent é€šä¿¡
from agentflow.protocols import A2AClient, AgentCard
card = AgentCard(name="MyAgent", skills=[...])
result = await A2AClient.call("remote-agent", task)

# AG-UI - å®æ—¶äº‹ä»¶
from agentflow.protocols import AGUIEventEmitter
emitter = AGUIEventEmitter(flow_id)
await emitter.emit_node_start("analyzer")
await emitter.emit_progress(50, 100)

# A2UI - å£°æ˜å¼ UI
from agentflow.protocols import A2UIEmitter, TextComponent
emitter = A2UIEmitter()
emitter.emit(TextComponent(text="Hello"))
```

---

## 5. é€ŸæŸ¥è¡¨

### å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤                      | è¯´æ˜             |
| ------------------------- | ---------------- |
| `agentflow create <name>` | åˆ›å»ºæ–°é¡¹ç›®       |
| `agentflow run`           | è¿è¡Œé¡¹ç›®         |
| `agentflow test`          | è¿è¡Œæµ‹è¯•         |
| `agentflow studio`        | æ‰“å¼€å¯è§†åŒ–ç¼–è¾‘å™¨ |
| `agentflow validate`      | éªŒè¯é…ç½®         |

### è£…é¥°å™¨é€ŸæŸ¥

| è£…é¥°å™¨   | è¯´æ˜       | ç¤ºä¾‹                           |
| -------- | ---------- | ------------------------------ |
| `@agent` | å®šä¹‰ Agent | `@agent class MyAgent: ...`    |
| `@tool`  | å®šä¹‰å·¥å…·   | `@tool def search(): ...`      |
| `@skill` | å®šä¹‰æŠ€èƒ½   | `@skill class QuerySkill: ...` |

### Hook é€ŸæŸ¥

| Hook              | è¯´æ˜       |
| ----------------- | ---------- |
| `useAgentStream`  | SSE æµå¤„ç† |
| `useNotification` | é€šçŸ¥ç³»ç»Ÿ   |

### Provider é€ŸæŸ¥

| å‡½æ•°              | è¯´æ˜                | ç¯å¢ƒå˜é‡                             |
| ----------------- | ------------------- | ------------------------------------ |
| `get_llm()`       | è·å– LLM Provider   | `LLM_PROVIDER`, `OPENAI_API_KEY`     |
| `get_db()`        | è·å–æ•°æ®åº“ Provider | `DATABASE_URL`, `SUPABASE_URL`       |
| `get_vectordb()`  | è·å–å‘é‡æ•°æ®åº“      | `VECTOR_DATABASE_TYPE`, `QDRANT_URL` |
| `get_embedding()` | è·å– Embedding      | `EMBEDDING_PROVIDER`                 |

### Context Engineering é€ŸæŸ¥

| ç»„ä»¶                    | è¯´æ˜              | å¯¼å…¥                                                         |
| ----------------------- | ----------------- | ------------------------------------------------------------ |
| `ContextEngineer`       | ç»Ÿåˆæ¥å£ï¼ˆæ¨èï¼‰  | `from agentflow import ContextEngineer`                      |
| `TokenBudgetManager`    | Token é¢„ç®—ç®¡ç†    | `from agentflow import TokenBudgetManager`                   |
| `ToolRelevanceSelector` | å·¥å…·ç›¸å…³æ€§é€‰æ‹©    | `from agentflow import ToolRelevanceSelector`                |
| `RetrievalGate`         | RAG æ£€ç´¢åˆ¤å®š      | `from agentflow import RetrievalGate`                        |
| `KeyNotesStore`         | é‡è¦ Notes æ°¸ç»­åŒ– | `from agentflow import KeyNotesStore`                        |
| `TurnBasedCompressor`   | è½®æ•°å‹ç¼©          | `from agentflow import TurnBasedCompressor`                  |
| `ResultSummarizer`      | ç»“æœè¿‡æ»¤          | `from agentflow.patterns.deep_agent import ResultSummarizer` |

### Context Engineering é¢„ç®—é€ŸæŸ¥

| é…ç½®é¡¹                 | é»˜è®¤å€¼ | è¯´æ˜                |
| ---------------------- | ------ | ------------------- |
| `system_prompt_budget` | 500    | ç³»ç»Ÿæç¤º Token é¢„ç®— |
| `tools_budget`         | 300    | å·¥å…·æè¿°é¢„ç®—        |
| `rag_context_budget`   | 2000   | RAG ä¸Šä¸‹æ–‡é¢„ç®—      |
| `history_budget`       | 4000   | ä¼šè¯å†å²é¢„ç®—        |
| `turn_threshold`       | 10     | å‹ç¼©è§¦å‘è½®æ•°        |
| `max_tools`            | 7      | æœ€å¤§æš´éœ²å·¥å…·æ•°      |

### VectorDB é€ŸæŸ¥

| ç±»å‹     | ç¯å¢ƒå˜é‡                        | ç‰¹ç‚¹          |
| -------- | ------------------------------- | ------------- |
| FAISS    | `VECTOR_DATABASE_TYPE=faiss`    | æœ¬åœ°é«˜é€Ÿã€GPU |
| Qdrant   | `VECTOR_DATABASE_TYPE=qdrant`   | ç”Ÿäº§æ¨è      |
| Weaviate | `VECTOR_DATABASE_TYPE=weaviate` | è¯­ä¹‰æœç´¢      |
| Supabase | `VECTOR_DATABASE_TYPE=supabase` | pgvector      |
| ChromaDB | `VECTOR_DATABASE_TYPE=chromadb` | å¼€å‘é»˜è®¤      |

### AG-UI äº‹ä»¶é€ŸæŸ¥

| äº‹ä»¶            | è§¦å‘æ—¶æœº       |
| --------------- | -------------- |
| `flow.start`    | å·¥ä½œæµå¼€å§‹     |
| `node.start`    | Agent å¼€å§‹å¤„ç† |
| `progress`      | è¿›åº¦æ›´æ–°       |
| `node.complete` | Agent å®Œæˆ     |
| `flow.complete` | å·¥ä½œæµå®Œæˆ     |
| `flow.error`    | å‘ç”Ÿé”™è¯¯       |

### é”™è¯¯ç é€ŸæŸ¥

| é”™è¯¯ç                  | è¯´æ˜         | å¯é‡è¯• |
| ---------------------- | ------------ | ------ |
| `VALIDATION_ERROR`     | è¾“å…¥éªŒè¯å¤±è´¥ | âŒ     |
| `AUTHENTICATION_ERROR` | è®¤è¯å¤±è´¥     | âŒ     |
| `NOT_FOUND`            | èµ„æºä¸å­˜åœ¨   | âŒ     |
| `RATE_LIMITED`         | è¯·æ±‚è¿‡å¤š     | âœ…     |
| `SERVER_ERROR`         | æœåŠ¡å™¨é”™è¯¯   | âœ…     |
| `NETWORK_ERROR`        | ç½‘ç»œé”™è¯¯     | âœ…     |

---

å‹ã‚¨ãƒ©ãƒ¼ã‚’æ¸›ã‚‰ã™: code-rules/global/mypy-avoid-patterns.md ã«å¾“ã£ã¦ä¿®æ­£ã—ã€AI ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ã›ã‚‹éš›ã‚‚ã“ã®ãƒ«ãƒ¼ãƒ«ã‚’å‚ç…§ã•ã›ã‚‹ã€‚
é€²æ—ç¢ºèª: python scripts/mypy_error_summary.py ã§ã‚³ãƒ¼ãƒ‰åˆ¥ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥ã®æ®‹ã‚Šä»¶æ•°ã‚’ç¢ºèªã€‚
ãã®ä»–ã®ãƒã‚§ãƒƒã‚¯ã ã‘é€šã—ãŸã„
./check.sh all --no-type-check ã¾ãŸã¯ make check-nomypy ã‚’ä½¿ç”¨ã€‚

## ğŸ“š æ›´å¤šèµ„æº

- **[Context Engineering æŒ‡å—](./context-engineering.md)** - â­ ä¸Šä¸‹æ–‡é¢„ç®—ç®¡ç†è¯¦ç»†æ•™ç¨‹
- [æ¡†æ¶æŠ½è±¡æ”¹è¿›è®¡åˆ’](./FRAMEWORK_ABSTRACTION_PLAN.md)
- [@agentflow/ui æ–‡æ¡£](../agentflow/sdk/frontend/README.md)
- [ç¤ºä¾‹åº”ç”¨](../apps/)
- [API æ–‡æ¡£](./api.md)

---

_æ–‡æ¡£ç‰ˆæœ¬: v1.0 | æ›´æ–°æ—¥æœŸ: 2026-01-03_
