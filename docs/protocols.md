# AgentFlow ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚¬ã‚¤ãƒ‰

AgentFlow ã¯ 4 ã¤ã®ã‚ªãƒ¼ãƒ—ãƒ³ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

- **MCP (Model Context Protocol)**: ãƒ„ãƒ¼ãƒ«æ¥ç¶šãƒ¬ã‚¤ãƒ¤ãƒ¼
- **A2A (Agent-to-Agent)**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå”èª¿ãƒ¬ã‚¤ãƒ¤ãƒ¼
- **AG-UI (Agent-UI)**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æºãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆé€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼‰
- **A2UI (Agent-to-UI)**: ç”Ÿæˆå¼ UI ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆUI è¦ç¯„ï¼‰

## ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚¹ã‚¿ãƒƒã‚¯æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚¹ã‚¿ãƒƒã‚¯                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤                                                  â”‚
â”‚     â””â”€â”€ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒª (Web/Mobile/Desktop)              â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¨ UI äº¤äº’å±¤                                                   â”‚
â”‚     â”œâ”€â”€ AG-UI: é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ« (ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ )             â”‚
â”‚     â””â”€â”€ A2UI: UI è¦ç¯„ (å®£è¨€å¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)                   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¤– Agent å±¤                                                    â”‚
â”‚     â””â”€â”€ Agent ã‚³ã‚¢ + Skills                                    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”— Agent å”èª¿å±¤                                                â”‚
â”‚     â””â”€â”€ A2A: Agent é–“é€šä¿¡ (ç™ºè¦‹ãƒ»å”èª¿ãƒ»å§”è­²)                   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”§ ãƒ„ãƒ¼ãƒ«å±¤                                                    â”‚
â”‚     â””â”€â”€ MCP: ãƒ„ãƒ¼ãƒ«æ¥ç¶š (ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒ»APIãƒ»å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**AG-UI ã¨ A2UI ã®é–¢ä¿‚ï¼š**
- AG-UI = é€šä¿¡ãƒ‘ã‚¤ãƒ—ï¼ˆHTTP ã®ã‚ˆã†ãªå½¹å‰²ï¼‰
- A2UI = ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆHTML ã®ã‚ˆã†ãªå½¹å‰²ï¼‰

## MCP (Model Context Protocol)

### æ¦‚è¦

MCP ã¯ AI ãƒ¢ãƒ‡ãƒ«ã¨ãƒ„ãƒ¼ãƒ«ã‚’æ¥ç¶šã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

- **Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.10+
- **é€šä¿¡æ–¹å¼**: stdio ãƒ™ãƒ¼ã‚¹
- **ç”¨é€”**: å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€API ãªã©ï¼‰ã¸ã®æ¥ç¶š

### è¨­å®š

`agent.yaml` ã§ MCP ã‚’æœ‰åŠ¹åŒ–ï¼š

```yaml
protocols:
  mcp: true
```

### MCP Client ã®ä½¿ç”¨

#### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```python
from agentflow.protocols.mcp_client import MCPClient

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ
client = MCPClient()

# ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š
await client.connect("filesystem")

# ãƒ„ãƒ¼ãƒ«å®šç¾©ã‚’å–å¾—
tools = await client.get_tool_definitions()
print(tools)

# ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—
result = await client.call_tool(
    "mcp://filesystem/read_file",
    {"path": "/path/to/file.txt"}
)
print(result)

# åˆ‡æ–­
await client.disconnect("filesystem")
```

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

`~/.agentflow/mcp_config.yaml` ã§ MCP ã‚µãƒ¼ãƒãƒ¼ã‚’è¨­å®šï¼š

```yaml
servers:
  filesystem:
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-filesystem"
      - /path/to/allowed/directory
    enabled: true

  github:
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-github"
    env:
      GITHUB_TOKEN: ${GITHUB_TOKEN}
    enabled: true
```

#### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ä½¿ç”¨

```python
from agentflow.core.agent_block import AgentBlock

class FileProcessorAgent(AgentBlock):
    async def initialize(self) -> None:
        await super().initialize()
        # MCP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆæœŸåŒ–
        self.mcp = MCPClient()
        await self.mcp.connect("filesystem")

    async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
        # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
        content = await self.mcp.call_tool(
            "mcp://filesystem/read_file",
            {"path": input_data["file_path"]}
        )

        # å‡¦ç†
        result = content.upper()

        return {"result": result}

    async def cleanup(self) -> None:
        await self.mcp.disconnect("filesystem")
        await super().cleanup()
```

#### MCP ãƒ„ãƒ¼ãƒ«å®šç¾©ã®è‡ªå‹•ç”Ÿæˆ

`@auto_adapt` ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¹ã‚­ãƒ«ãŒè‡ªå‹•çš„ã« MCP ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¾ã™ï¼š

```python
# agent.yaml
skills:
  - name: process_text
    description: ãƒ†ã‚­ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹
    inputs:
      - text
    outputs:
      - result

# Python ã‚³ãƒ¼ãƒ‰
tools = agent.get_mcp_tools()
# [
#   {
#     "name": "my-agent.process_text",
#     "description": "ãƒ†ã‚­ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹",
#     "inputSchema": {
#       "type": "object",
#       "properties": {
#         "text": {"type": "string", "description": "..."}
#       },
#       "required": ["text"]
#     }
#   }
# ]
```

---

## A2A (Agent-to-Agent)

### æ¦‚è¦

A2A ã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®å”èª¿ã‚’å®Ÿç¾ã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

- **Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.9+
- **é€šä¿¡æ–¹å¼**: HTTP/REST
- **ç”¨é€”**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®ã‚¿ã‚¹ã‚¯å§”è­²ã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

### è¨­å®š

`agent.yaml` ã§ A2A ã‚’æœ‰åŠ¹åŒ–ï¼š

```yaml
protocols:
  a2a:
    enabled: true
    endpoint: http://localhost:8000
```

### A2A Server ã®ä½¿ç”¨

#### ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```python
from agentflow.protocols.a2a_server import A2AServer

# ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆ
server = A2AServer()

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²
card = agent.get_a2a_card()
handlers = {
    "process_text": lambda inputs: agent.run(inputs),
    "analyze": lambda inputs: agent.analyze(inputs),
}
server.register_agent(card, handlers)

# ã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†
result = await server.handle_task(
    "My Agent",  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå
    "process_text",  # ã‚¹ã‚­ãƒ«å
    {"text": "hello"}  # å…¥åŠ›
)
print(result)
# {
#   "status": "success",
#   "result": {"result": "HELLO"},
#   "agent": "My Agent",
#   "skill": "process_text"
# }
```

#### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã®å–å¾—

```python
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’å–å¾—
card = agent.get_a2a_card()
print(card.model_dump())
# {
#   "name": "My Agent",
#   "description": "...",
#   "version": "1.0.0",
#   "skills": [
#     {
#       "name": "process_text",
#       "description": "ãƒ†ã‚­ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹",
#       "inputs": [...],
#       "outputs": [...]
#     }
#   ],
#   "metadata": {...}
# }
```

### A2A Client ã®ä½¿ç”¨

#### ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‘¼ã³å‡ºã—

```python
from agentflow.protocols.a2a_client import A2AClient

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ
client = A2AClient()

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™ºè¦‹
card = await client.discover_agent("http://localhost:8000")
print(f"ç™ºè¦‹: {card.name}")

# ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—
result = await client.call_remote_agent(
    "http://localhost:8000",
    "process_text",
    {"text": "hello"}
)
print(result)
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†

```python
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
client.clear_cache("http://localhost:8000")

# å…¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
client.clear_all_cache()

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å–å¾—
endpoints = client.get_cached_endpoints()
```

#### ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```python
class OrchestratorAgent(AgentBlock):
    async def initialize(self) -> None:
        await super().initialize()
        self.a2a_client = A2AClient()

    async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
        # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ 1: ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†
        result1 = await self.a2a_client.call_remote_agent(
            "http://localhost:8001",
            "process_text",
            {"text": input_data["text"]}
        )

        # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ 2: åˆ†æ
        result2 = await self.a2a_client.call_remote_agent(
            "http://localhost:8002",
            "analyze",
            {"text": result1["result"]}
        )

        return {"final_result": result2}
```

---

## AG-UI (Agent-UI)

### æ¦‚è¦

AG-UI ã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¥ç¶šã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

- **Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.13+ **å¿…é ˆ**
- **é€šä¿¡æ–¹å¼**: SSE (Server-Sent Events)
- **ç”¨é€”**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã€é€²æ—è¡¨ç¤ºã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°

### è¨­å®š

`agent.yaml` ã§ AG-UI ã‚’æœ‰åŠ¹åŒ–ï¼š

```yaml
protocols:
  agui: true
```

### AG-UI Emitter ã®ä½¿ç”¨

#### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```python
from agentflow.protocols.agui_emitter import AGUIEventEmitter

# ã‚¨ãƒŸãƒƒã‚¿ãƒ¼ã‚’ä½œæˆ
emitter = agent.create_agui_emitter(agent.engine)

# ãƒ•ãƒ­ãƒ¼ã«ã‚¢ã‚¿ãƒƒãƒ
await emitter.attach_to_flow("my-flow")

# ãƒ­ã‚°ã‚’é€ä¿¡
await emitter.emit_log("info", "å‡¦ç†ã‚’é–‹å§‹ã—ã¾ã™", "agent")
await emitter.emit_log("debug", "ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...", "agent")
await emitter.emit_log("success", "å‡¦ç†å®Œäº†ï¼", "agent")

# ãƒ‡ã‚¿ãƒƒãƒ
await emitter.detach_from_flow("my-flow")
```

#### ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°

```python
# ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
async for event in emitter.stream_events():
    print(f"[{event.event_type.value}] {event.data}")

    if event.event_type == AGUIEventType.FLOW_COMPLETE:
        break
```

#### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ä½¿ç”¨

```python
class StreamingAgent(AgentBlock):
    async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
        # ã‚¨ãƒŸãƒƒã‚¿ãƒ¼ã‚’ä½œæˆ
        emitter = self.create_agui_emitter(self.engine)
        await emitter.attach_to_flow("processing")

        # å‡¦ç†é–‹å§‹
        await emitter.emit_log("info", "å‡¦ç†ã‚’é–‹å§‹ã—ã¾ã™", "agent")

        # ã‚¹ãƒ†ãƒƒãƒ— 1
        await emitter.emit_log("info", "ã‚¹ãƒ†ãƒƒãƒ— 1: ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿", "agent")
        data = await self.load_data(input_data["source"])

        # ã‚¹ãƒ†ãƒƒãƒ— 2
        await emitter.emit_log("info", "ã‚¹ãƒ†ãƒƒãƒ— 2: ãƒ‡ãƒ¼ã‚¿å‡¦ç†", "agent")
        result = await self.process_data(data)

        # å®Œäº†
        await emitter.emit_log("success", "å‡¦ç†å®Œäº†ï¼", "agent")
        await emitter.detach_from_flow("processing")

        return {"result": result}
```

#### ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—

```python
from agentflow.protocols.agui_events import AGUIEventType

# åˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—
AGUIEventType.FLOW_START      # ãƒ•ãƒ­ãƒ¼é–‹å§‹
AGUIEventType.FLOW_COMPLETE   # ãƒ•ãƒ­ãƒ¼å®Œäº†
AGUIEventType.FLOW_ERROR      # ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ©ãƒ¼
AGUIEventType.FLOW_CANCEL     # ãƒ•ãƒ­ãƒ¼ã‚­ãƒ£ãƒ³ã‚»ãƒ«
AGUIEventType.NODE_START      # ãƒãƒ¼ãƒ‰é–‹å§‹
AGUIEventType.NODE_COMPLETE   # ãƒãƒ¼ãƒ‰å®Œäº†
AGUIEventType.LOG             # ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```

---

## A2UI (Agent-to-UI)

### æ¦‚è¦

A2UI ã¯ Google ãŒæå”±ã™ã‚‹ç”Ÿæˆå¼ UI ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚Agent ãŒå®£è¨€å¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç”Ÿæˆã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒã‚¤ãƒ†ã‚£ãƒ– UI ã¨ã—ã¦æç”»ã—ã¾ã™ã€‚

- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v0.8 (Public Preview)
- **é€šä¿¡æ–¹å¼**: AG-UI ã‚’é€šã˜ã¦é…ä¿¡
- **ç”¨é€”**: Agent ã«ã‚ˆã‚‹å‹•çš„ UI ç”Ÿæˆ

### AG-UI ã¨ã®é–¢ä¿‚

| æ¯”è¼ƒ | AG-UI | A2UI |
|------|-------|------|
| **ç¨®åˆ¥** | é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ« | UI è¦ç¯„ |
| **å½¹å‰²** | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡ | UI è¨˜è¿° |
| **é¡æ¯”** | HTTP | HTML |

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```python
from agentflow.protocols.a2ui import (
    TextComponent, ButtonComponent, CardComponent,
    A2UIEmitter
)

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ
card = CardComponent(
    title="æ¤œç´¢çµæœ",
    children=[
        TextComponent("5ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"),
        ButtonComponent("è©³ç´°ã‚’è¦‹ã‚‹", action="view_details"),
    ]
)

# A2UI ã‚¨ãƒŸãƒƒã‚¿ãƒ¼ã§é…ä¿¡
emitter = A2UIEmitter(agui_emitter)
await emitter.emit_component(card, surface_id="main")
```

### åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | èª¬æ˜ | ä¸»ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ |
|--------------|------|---------------|
| `TextComponent` | ãƒ†ã‚­ã‚¹ãƒˆ | `content` |
| `ButtonComponent` | ãƒœã‚¿ãƒ³ | `label`, `action` |
| `InputComponent` | å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | `name`, `type`, `placeholder` |
| `CardComponent` | ã‚«ãƒ¼ãƒ‰ | `title`, `children` |
| `ListComponent` | ãƒªã‚¹ãƒˆ | `children` |
| `ImageComponent` | ç”»åƒ | `src`, `alt` |
| `FormComponent` | ãƒ•ã‚©ãƒ¼ãƒ  | `action`, `children` |

### ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```python
from agentflow.protocols.a2ui import A2UIComponent, ComponentType, ComponentRegistry

# ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®šç¾©
class ChartComponent(A2UIComponent):
    def __init__(self, data: list, chart_type: str = "bar"):
        super().__init__(
            component_type=ComponentType.CUSTOM,
            props={"data": data, "chart_type": chart_type, "custom_type": "chart"}
        )

# ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«ç™»éŒ²
registry = ComponentRegistry()
registry.register("chart", ChartComponent)
```

### ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º

```python
# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ JSON å½¢å¼ã«å¤‰æ›
card_dict = card.to_dict()
print(card_dict)
# {
#   "type": "card",
#   "props": {"title": "æ¤œç´¢çµæœ"},
#   "children": [...]
# }

# JSON ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å¾©å…ƒ
restored = A2UIComponent.from_dict(card_dict)
```

---

## ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®çµ„ã¿åˆã‚ã›

### å…¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æœ‰åŠ¹åŒ–

```yaml
protocols:
  mcp: true
  a2a:
    enabled: true
    endpoint: http://localhost:8000
  agui: true
```

### çµ±åˆä¾‹

```python
class AdvancedAgent(AgentBlock):
    async def initialize(self) -> None:
        await super().initialize()
        # MCP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
        self.mcp = MCPClient()
        await self.mcp.connect("filesystem")

        # A2A ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
        self.a2a = A2AClient()

    async def run(self, input_data: dict[str, Any]) -> dict[str, Any]:
        # AG-UI ã‚¨ãƒŸãƒƒã‚¿ãƒ¼
        emitter = self.create_agui_emitter(self.engine)
        await emitter.attach_to_flow("advanced-flow")

        # ã‚¹ãƒ†ãƒƒãƒ— 1: MCP ã§ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
        await emitter.emit_log("info", "ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...", "agent")
        content = await self.mcp.call_tool(
            "mcp://filesystem/read_file",
            {"path": input_data["file"]}
        )

        # ã‚¹ãƒ†ãƒƒãƒ— 2: A2A ã§ãƒªãƒ¢ãƒ¼ãƒˆå‡¦ç†
        await emitter.emit_log("info", "ãƒªãƒ¢ãƒ¼ãƒˆå‡¦ç†ä¸­...", "agent")
        result = await self.a2a.call_remote_agent(
            "http://localhost:8001",
            "process",
            {"content": content}
        )

        # å®Œäº†
        await emitter.emit_log("success", "å‡¦ç†å®Œäº†ï¼", "agent")
        await emitter.detach_from_flow("advanced-flow")

        return result
```

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](api.md) - è©³ç´°ãª API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [CLI ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](cli.md) - CLI ã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°
- [ã‚µãƒ³ãƒ—ãƒ«é›†](../examples/) - å®Ÿè£…ä¾‹
